{"ast":null,"code":"import { VERSION } from '../../constants.js';\nimport { getStatsUrl, request } from '../../utils/request.js';\nclass ProductionStatsCollector {\n  static MAX_INT32 = 2147483647;\n  timeoutId = null;\n  lastEvent;\n  config;\n  stackEvents = [];\n  constructor(config) {\n    this.config = config;\n  }\n  getIntId() {\n    return Math.floor(Math.random() * ProductionStatsCollector.MAX_INT32);\n  }\n  getCurrentTime(isMicrosec = true) {\n    const strTime = Date.now().toString(10);\n    if (isMicrosec) {\n      return strTime + '000';\n    }\n    return strTime;\n  }\n  sendStats(event) {\n    this.stackEvents.push(event);\n    this.timeoutId && window.clearTimeout(this.timeoutId);\n    return new Promise((res, rej) => {\n      this.timeoutId = window.setTimeout(() => {\n        const params = {\n          events: JSON.stringify(this.stackEvents),\n          sak_version: VERSION\n        };\n        this.stackEvents = [];\n        const url = getStatsUrl('stat_events_vkid_sdk', this.config);\n        request(url, params).then(res).catch(rej);\n      }, 0);\n    });\n  }\n  getBaseEvent(screen) {\n    return {\n      id: this.getIntId(),\n      prev_event_id: this.lastEvent?.id || 0,\n      prev_nav_id: 0,\n      timestamp: this.getCurrentTime(),\n      url: window.location.href,\n      screen\n    };\n  }\n  logEvent(event) {\n    this.lastEvent = event;\n    return this.sendStats(event);\n  }\n}\nexport { ProductionStatsCollector };","map":{"version":3,"names":["VERSION","getStatsUrl","request","ProductionStatsCollector","MAX_INT32","timeoutId","lastEvent","config","stackEvents","constructor","getIntId","Math","floor","random","getCurrentTime","isMicrosec","strTime","Date","now","toString","sendStats","event","push","window","clearTimeout","Promise","res","rej","setTimeout","params","events","JSON","stringify","sak_version","url","then","catch","getBaseEvent","screen","id","prev_event_id","prev_nav_id","timestamp","location","href","logEvent"],"sources":["C:/Users/player/Documents/GitHub/synask-app/node_modules/@vkid/sdk/dist-sdk/esm/core/analytics/ProductionStatsCollector.js"],"sourcesContent":["import { VERSION } from '../../constants.js';\nimport { getStatsUrl, request } from '../../utils/request.js';\n\nclass ProductionStatsCollector {\n    static MAX_INT32 = 2147483647;\n    timeoutId = null;\n    lastEvent;\n    config;\n    stackEvents = [];\n    constructor(config){\n        this.config = config;\n    }\n    getIntId() {\n        return Math.floor(Math.random() * ProductionStatsCollector.MAX_INT32);\n    }\n    getCurrentTime(isMicrosec = true) {\n        const strTime = Date.now().toString(10);\n        if (isMicrosec) {\n            return strTime + '000';\n        }\n        return strTime;\n    }\n    sendStats(event) {\n        this.stackEvents.push(event);\n        this.timeoutId && window.clearTimeout(this.timeoutId);\n        return new Promise((res, rej)=>{\n            this.timeoutId = window.setTimeout(()=>{\n                const params = {\n                    events: JSON.stringify(this.stackEvents),\n                    sak_version: VERSION\n                };\n                this.stackEvents = [];\n                const url = getStatsUrl('stat_events_vkid_sdk', this.config);\n                request(url, params).then(res).catch(rej);\n            }, 0);\n        });\n    }\n    getBaseEvent(screen) {\n        return {\n            id: this.getIntId(),\n            prev_event_id: this.lastEvent?.id || 0,\n            prev_nav_id: 0,\n            timestamp: this.getCurrentTime(),\n            url: window.location.href,\n            screen\n        };\n    }\n    logEvent(event) {\n        this.lastEvent = event;\n        return this.sendStats(event);\n    }\n}\n\nexport { ProductionStatsCollector };\n"],"mappings":"AAAA,SAASA,OAAO,QAAQ,oBAAoB;AAC5C,SAASC,WAAW,EAAEC,OAAO,QAAQ,wBAAwB;AAE7D,MAAMC,wBAAwB,CAAC;EAC3B,OAAOC,SAAS,GAAG,UAAU;EAC7BC,SAAS,GAAG,IAAI;EAChBC,SAAS;EACTC,MAAM;EACNC,WAAW,GAAG,EAAE;EAChBC,WAAWA,CAACF,MAAM,EAAC;IACf,IAAI,CAACA,MAAM,GAAGA,MAAM;EACxB;EACAG,QAAQA,CAAA,EAAG;IACP,OAAOC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAGV,wBAAwB,CAACC,SAAS,CAAC;EACzE;EACAU,cAAcA,CAACC,UAAU,GAAG,IAAI,EAAE;IAC9B,MAAMC,OAAO,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAC;IACvC,IAAIJ,UAAU,EAAE;MACZ,OAAOC,OAAO,GAAG,KAAK;IAC1B;IACA,OAAOA,OAAO;EAClB;EACAI,SAASA,CAACC,KAAK,EAAE;IACb,IAAI,CAACb,WAAW,CAACc,IAAI,CAACD,KAAK,CAAC;IAC5B,IAAI,CAAChB,SAAS,IAAIkB,MAAM,CAACC,YAAY,CAAC,IAAI,CAACnB,SAAS,CAAC;IACrD,OAAO,IAAIoB,OAAO,CAAC,CAACC,GAAG,EAAEC,GAAG,KAAG;MAC3B,IAAI,CAACtB,SAAS,GAAGkB,MAAM,CAACK,UAAU,CAAC,MAAI;QACnC,MAAMC,MAAM,GAAG;UACXC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAAC,IAAI,CAACxB,WAAW,CAAC;UACxCyB,WAAW,EAAEjC;QACjB,CAAC;QACD,IAAI,CAACQ,WAAW,GAAG,EAAE;QACrB,MAAM0B,GAAG,GAAGjC,WAAW,CAAC,sBAAsB,EAAE,IAAI,CAACM,MAAM,CAAC;QAC5DL,OAAO,CAACgC,GAAG,EAAEL,MAAM,CAAC,CAACM,IAAI,CAACT,GAAG,CAAC,CAACU,KAAK,CAACT,GAAG,CAAC;MAC7C,CAAC,EAAE,CAAC,CAAC;IACT,CAAC,CAAC;EACN;EACAU,YAAYA,CAACC,MAAM,EAAE;IACjB,OAAO;MACHC,EAAE,EAAE,IAAI,CAAC7B,QAAQ,CAAC,CAAC;MACnB8B,aAAa,EAAE,IAAI,CAAClC,SAAS,EAAEiC,EAAE,IAAI,CAAC;MACtCE,WAAW,EAAE,CAAC;MACdC,SAAS,EAAE,IAAI,CAAC5B,cAAc,CAAC,CAAC;MAChCoB,GAAG,EAAEX,MAAM,CAACoB,QAAQ,CAACC,IAAI;MACzBN;IACJ,CAAC;EACL;EACAO,QAAQA,CAACxB,KAAK,EAAE;IACZ,IAAI,CAACf,SAAS,GAAGe,KAAK;IACtB,OAAO,IAAI,CAACD,SAAS,CAACC,KAAK,CAAC;EAChC;AACJ;AAEA,SAASlB,wBAAwB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}