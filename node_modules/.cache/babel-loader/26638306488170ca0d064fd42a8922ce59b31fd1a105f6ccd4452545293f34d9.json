{"ast":null,"code":"import React,{useState,useEffect}from'react';import{createClient}from'@supabase/supabase-js';import'./ProfileSettings.css';import p from'./ProfilePreview.module.css';import load from'../Loader.module.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const supabase=createClient('https://cnicyffiqvdhgyzkogtl.supabase.co','eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNuaWN5ZmZpcXZkaGd5emtvZ3RsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MDc3NDM2NzcsImV4cCI6MjAyMzMxOTY3N30.bZoapdV-TJiq42uJaOPGBfPz91ULReQ1_ahXpUHNaJ8');const ProfileSettings=()=>{const[subSection,setSubSection]=useState('about');const[profile,setProfile]=useState(null);const[editedProfile,setEditedProfile]=useState(null);const[tags,setTags]=useState([]);const[usernameAvailable,setUsernameAvailable]=useState(true);const[isSaving,setIsSaving]=useState(false);const[loading,setLoading]=useState(true);const[showSaved,setShowSaved]=useState(true);const[notification,setNotification]=useState('');const[customStatus,setCustomStatus]=useState('');useEffect(()=>{const fetchProfile=async()=>{try{const{data:userData,error:userError}=await supabase.auth.getUser();if(userError||!userData){console.log('No active session found.');window.location.href='/login';return;}let query=supabase.from('users_public_information').select('id, username, first_name, last_name, avatar_url, cover_url, status, tags').eq('auth_id',userData.user.id).single();const{data,error}=await query;if(error){throw error;}setProfile(data);setEditedProfile(data);setTags(JSON.parse(data.tags||'[]'));}catch(error){console.error('Error fetching user information:',error.message);}finally{setLoading(false);}};fetchProfile();},[]);useEffect(()=>{setUsernameAvailable('check');const timer=setTimeout(()=>{if(editedProfile&&editedProfile.username!==profile.username){checkUsernameAvailability(editedProfile.username);}else if(editedProfile){setUsernameAvailable(null);}},3000);return()=>clearTimeout(timer);},[editedProfile===null||editedProfile===void 0?void 0:editedProfile.username]);const renderStatus=status=>{if(status==='online'){return/*#__PURE__*/_jsx(\"div\",{className:p.statusIndicator,\"data-status\":status,style:{backgroundColor:'green'}});}else if(status==='offline'){return/*#__PURE__*/_jsx(\"div\",{className:p.statusIndicator,\"data-status\":status,style:{backgroundColor:'gray'}});}else if(status){const[symbol,userStatus]=status.split(':');if(userStatus&&symbol.length<4){return/*#__PURE__*/_jsx(\"div\",{className:p.customStatusIndicator,\"data-status\":userStatus,children:symbol});}return/*#__PURE__*/_jsx(\"div\",{className:p.customStatusIndicator,\"data-status\":status,children:\"\\uD83D\\uDCAC\"});}else{return;}};const checkUsernameAvailability=async username=>{const{data,error}=await supabase.from('users_public_information').select('id').eq('username',username).single();setUsernameAvailable(!data);};const handleChange=(field,value)=>{if(field==='status'&&value!=='custom'){setCustomStatus(false);setEditedProfile({...editedProfile,status:value});}else if(field==='custom_status'){setCustomStatus(value);setEditedProfile({...editedProfile,status:value});}else{setEditedProfile({...editedProfile,[field]:value});}};const handleTagInput=event=>{if(event.key==='Enter'&&event.target.value.trim()&&tags.length<5){const newTag=event.target.value.trim();if(newTag.length<=15&&tags.join('').length+newTag.length<=60){setTags([...tags,newTag]);event.target.value='';}}};const removeTag=tagToRemove=>{setTags(tags.filter(tag=>tag!==tagToRemove));};const handleSave=async()=>{setIsSaving(true);setNotification('');const updatedProfile={...editedProfile,status:customStatus||editedProfile.status,tags:JSON.stringify(tags)};const{data:userData,error:userError}=await supabase.auth.getUser();if(userError||!userData){console.log('No active session found.');window.location.href='/login';return;}const{data,error}=await supabase.from('users_public_information').update(updatedProfile).eq('auth_id',userData.user.id);if(error){setNotification('Ошибка сохранения данных в базу данных');console.error('Error updating profile:',error.message);return;}const{dataUpdate,errorUpdate}=await supabase.auth.updateUser({data:{firstName:updatedProfile.first_name,lastName:updatedProfile.last_name,nickname:updatedProfile.username}});if(errorUpdate){setNotification('Ошибка сохранения данных для пользователя');console.error('Error updating profile:',error.message);}else{setProfile(updatedProfile);setEditedProfile(updatedProfile);setNotification('Данные успешно сохранены');window.dispatchEvent(new Event('profileUpdated'));// Custom event for updating dependent components\n}setIsSaving(false);};const renderSubSection=()=>{switch(subSection){case'about':return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u041E \\u0441\\u0435\\u0431\\u0435\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441:\"}),/*#__PURE__*/_jsxs(\"select\",{value:(editedProfile===null||editedProfile===void 0?void 0:editedProfile.status)==='online'||(editedProfile===null||editedProfile===void 0?void 0:editedProfile.status)==='offline'?editedProfile===null||editedProfile===void 0?void 0:editedProfile.status:'custom',onChange:e=>{const value=e.target.value;if(value==='custom'){handleChange('status',customStatus);}else{handleChange('status',value);}},className:profile.status!==editedProfile.status?'changed':'',children:[/*#__PURE__*/_jsx(\"option\",{value:\"online\",children:\"\\u041E\\u043D\\u043B\\u0430\\u0439\\u043D\"}),/*#__PURE__*/_jsx(\"option\",{value:\"offline\",children:\"\\u041E\\u0444\\u043B\\u0430\\u0439\\u043D\"}),/*#__PURE__*/_jsx(\"option\",{value:\"custom\",children:\"\\u041F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C\\u0441\\u043A\\u0438\\u0439 \\u0441\\u0442\\u0430\\u0442\\u0443\\u0441\"})]}),(editedProfile===null||editedProfile===void 0?void 0:editedProfile.status)!='online'&&(editedProfile===null||editedProfile===void 0?void 0:editedProfile.status)!='offline'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:customStatus||(editedProfile===null||editedProfile===void 0?void 0:editedProfile.status)||'',onChange:e=>handleChange('custom_status',e.target.value),placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0441\\u0432\\u043E\\u0439 \\u0441\\u0442\\u0430\\u0442\\u0443\\u0441\",className:\"custom-status-input\"}),(editedProfile===null||editedProfile===void 0?void 0:editedProfile.status)===''&&/*#__PURE__*/_jsx(\"div\",{className:\"message\",children:\"\\u041E\\u0441\\u0442\\u0430\\u0432\\u044C\\u0442\\u0435 \\u043F\\u043E\\u043B\\u0435 \\u043F\\u0443\\u0441\\u0442\\u044B\\u043C, \\u0435\\u0441\\u043B\\u0438 \\u0445\\u043E\\u0442\\u0438\\u0442\\u0435 \\u0443\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u0441\\u0442\\u0430\\u0442\\u0443\\u0441\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0410\\u0432\\u0430\\u0442\\u0430\\u0440:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",value:(editedProfile===null||editedProfile===void 0?void 0:editedProfile.avatar_url)||'',onChange:e=>handleChange('avatar_url',e.target.value),placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 URL \\u0430\\u0432\\u0430\\u0442\\u0430\\u0440\\u0430\",className:profile.avatar_url!==editedProfile.avatar_url?'changed':''}),(editedProfile===null||editedProfile===void 0?void 0:editedProfile.avatar_url)&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:editedProfile.avatar_url,alt:\"Avatar Preview\",onError:e=>e.target.src='error_search-image.png',onClick:()=>alert('Не удалось получить изображение'),style:{cursor:'pointer',width:'50px',height:'50px'}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u041E\\u0431\\u043B\\u043E\\u0436\\u043A\\u0430:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",value:(editedProfile===null||editedProfile===void 0?void 0:editedProfile.cover_url)||'',onChange:e=>handleChange('cover_url',e.target.value),placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 URL \\u043E\\u0431\\u043B\\u043E\\u0436\\u043A\\u0438\",className:profile.cover_url!==editedProfile.cover_url?'changed':''}),(editedProfile===null||editedProfile===void 0?void 0:editedProfile.cover_url)&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:editedProfile.cover_url,alt:\"Cover Preview\",onError:e=>e.target.src='error_search-image.png',onClick:()=>alert('Не удалось получить изображение'),style:{cursor:'pointer',width:'50px',height:'50px'}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0418\\u043C\\u044F:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:(editedProfile===null||editedProfile===void 0?void 0:editedProfile.first_name)||'',onChange:e=>handleChange('first_name',e.target.value),className:profile.first_name!==editedProfile.first_name?'changed':''})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0424\\u0430\\u043C\\u0438\\u043B\\u0438\\u044F:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:(editedProfile===null||editedProfile===void 0?void 0:editedProfile.last_name)||'',onChange:e=>handleChange('last_name',e.target.value),className:profile.last_name!==editedProfile.last_name?'changed':''})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:(editedProfile===null||editedProfile===void 0?void 0:editedProfile.username)||'',onChange:e=>handleChange('username',e.target.value),className:usernameAvailable===false?'error':profile.username!==editedProfile.username?'changed':''}),profile.username===editedProfile.username&&/*#__PURE__*/_jsx(\"div\",{className:\"saved-username\",children:\"\\u042D\\u0442\\u043E\\u0442 \\u043D\\u0438\\u043A \\u0443\\u0436\\u0435 \\u0441\\u0442\\u043E\\u0438\\u0442 \\u0443 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\"}),usernameAvailable==='check'&&/*#__PURE__*/_jsx(\"span\",{children:\"\\u041F\\u0440\\u043E\\u0432\\u0435\\u0440\\u043A\\u0430...\"}),usernameAvailable===true&&/*#__PURE__*/_jsx(\"span\",{style:{color:'green'},children:\"\\u042D\\u0442\\u043E\\u0442 \\u043D\\u0438\\u043A \\u0441\\u0432\\u043E\\u0431\\u043E\\u0434\\u0435\\u043D\"}),usernameAvailable===false&&/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\"\\u042D\\u0442\\u043E\\u0442 \\u043D\\u0438\\u043A \\u0437\\u0430\\u043D\\u044F\\u0442\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0422\\u0435\\u0433\\u0438:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0442\\u0435\\u0433 \\u0438 \\u043D\\u0430\\u0436\\u043C\\u0438\\u0442\\u0435 Enter\",onKeyUp:handleTagInput}),/*#__PURE__*/_jsx(\"div\",{className:\"tags\",children:tags.map(tag=>/*#__PURE__*/_jsxs(\"div\",{className:\"tag\",children:[tag,/*#__PURE__*/_jsx(\"span\",{onClick:()=>removeTag(tag),children:\"x\"})]},tag))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u041E \\u0441\\u0435\\u0431\\u0435:\"}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"\\u041D\\u0430\\u043F\\u0438\\u0448\\u0438\\u0442\\u0435 \\u043E \\u0441\\u0435\\u0431\\u0435\",value:(editedProfile===null||editedProfile===void 0?void 0:editedProfile.about)||'',onChange:e=>handleChange('about',e.target.value),className:profile.about!==editedProfile.about?'changed':''})]})]});case'media':return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u041C\\u0435\\u0434\\u0438\\u0430\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"media-actions\",children:[/*#__PURE__*/_jsx(\"button\",{children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0444\\u043E\\u0442\\u043E/\\u0432\\u0438\\u0434\\u0435\\u043E\"}),/*#__PURE__*/_jsx(\"button\",{children:\"\\u0412\\u044B\\u0434\\u0435\\u043B\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u041F\\u043E\\u0438\\u0441\\u043A \\u043F\\u043E \\u043E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u044E\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"media-gallery\"})]});case'music':return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u041C\\u0443\\u0437\\u044B\\u043A\\u0430\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"music-actions\",children:[/*#__PURE__*/_jsx(\"button\",{children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0442\\u0440\\u0435\\u043A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u041F\\u043E\\u0438\\u0441\\u043A \\u043F\\u043E \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u044E \\u0438\\u043B\\u0438 \\u0430\\u0440\\u0442\\u0438\\u0441\\u0442\\u0443\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"music-list\"})]});case'verification':return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u0412\\u0435\\u0440\\u0438\\u0444\\u0438\\u043A\\u0430\\u0446\\u0438\\u044F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"verification-service\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://cubiq.ru/wp-content/uploads/2020/09/twitchprime.jpg\",className:\"service-icon\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"service-info\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u041D\\u0438\\u043A\\u043D\\u0435\\u0439\\u043C: user123\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0424\\u043E\\u043B\\u043E\\u0432\\u0435\\u0440\\u044B: 12,000\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0422\\u0440\\u0435\\u0431\\u043E\\u0432\\u0430\\u043D\\u0438\\u044F:\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsxs(\"li\",{children:[\"10,000 \\u0444\\u043E\\u043B\\u043E\\u0432\\u0435\\u0440\\u043E\\u0432 \",/*#__PURE__*/_jsx(\"span\",{children:\"\\u2714\"})]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u0421\\u0442\\u0440\\u0438\\u043C\\u044B \\u043A\\u0430\\u0436\\u0434\\u0443\\u044E \\u043D\\u0435\\u0434\\u0435\\u043B\\u044E \",/*#__PURE__*/_jsx(\"span\",{children:\"\\u2714\"})]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u041F\\u0440\\u0438\\u0435\\u043C\\u043B\\u0435\\u043C\\u043E\\u0435 \\u043A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u043F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440\\u043E\\u0432 \",/*#__PURE__*/_jsx(\"span\",{children:\"\\u2714\"})]})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0412\\u044B \\u043C\\u0435\\u0434\\u0438\\u0439\\u043D\\u0430\\u044F \\u043B\\u0438\\u0447\\u043D\\u043E\\u0441\\u0442\\u044C \",/*#__PURE__*/_jsx(\"span\",{children:\"\\u2714\"})]})]})]}),/*#__PURE__*/_jsx(\"button\",{children:\"\\u041F\\u043E\\u0434\\u043A\\u043B\\u044E\\u0447\\u0438\\u0442\\u044C \\u043D\\u043E\\u0432\\u044B\\u0439 \\u0441\\u0435\\u0440\\u0432\\u0438\\u0441\"})]});default:return/*#__PURE__*/_jsx(\"div\",{children:\"\\u041E \\u0441\\u0435\\u0431\\u0435\"});}};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:load.spinner,children:[/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{})]});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u041C\\u043E\\u0439 \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\"}),/*#__PURE__*/_jsx(\"label\",{children:\"\\u041F\\u0440\\u0435\\u0434\\u043F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"profile-preview\",children:/*#__PURE__*/_jsx(\"div\",{className:p.container,children:(showSaved?profile:editedProfile)&&/*#__PURE__*/_jsxs(\"div\",{className:p.profileBlock,children:[/*#__PURE__*/_jsxs(\"div\",{className:p.profileHeader,children:[/*#__PURE__*/_jsx(\"div\",{className:p.profileCover,children:/*#__PURE__*/_jsx(\"img\",{id:\"profile-cover\",src:showSaved?profile.cover_url:editedProfile.cover_url,alt:\"Cover Photo\"})}),/*#__PURE__*/_jsxs(\"div\",{className:p.profileAvatar,children:[/*#__PURE__*/_jsx(\"img\",{id:\"profile-avatar\",src:showSaved?profile.avatar_url:editedProfile.avatar_url,alt:\"User Photo\"}),renderStatus(showSaved?profile.status:editedProfile.status)]}),/*#__PURE__*/_jsxs(\"div\",{className:p.profileInfo,children:[/*#__PURE__*/_jsx(\"h2\",{className:p.profileNames,children:\"\".concat(showSaved?profile.first_name:editedProfile.first_name,\" \").concat(showSaved?profile.last_name:editedProfile.last_name)}),/*#__PURE__*/_jsx(\"div\",{className:p.profileTags,children:(showSaved?JSON.parse(profile.tags||'[]'):tags).map(tag=>/*#__PURE__*/_jsx(\"span\",{className:p.tag,children:tag},tag))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:p.profileMenu,children:[/*#__PURE__*/_jsx(\"div\",{className:p.menuItem,children:\"About\"}),/*#__PURE__*/_jsx(\"div\",{className:p.menuItem,children:\"Events\"}),/*#__PURE__*/_jsx(\"div\",{className:p.menuItem,children:\"Media\"}),/*#__PURE__*/_jsx(\"div\",{className:p.menuItem,children:\"Friends\"}),/*#__PURE__*/_jsx(\"div\",{className:p.menuItem,children:\"Groups\"}),/*#__PURE__*/_jsx(\"div\",{className:p.menuItem,children:\"Settings\"})]}),/*#__PURE__*/_jsx(\"div\",{className:p.profileContent})]})})}),JSON.stringify(profile)!==JSON.stringify(editedProfile)&&!showSaved&&/*#__PURE__*/_jsxs(\"div\",{className:\"profile-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowSaved(!showSaved),children:showSaved?'Показать изменённую версию':'Показать сохранённую версию'}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSave,disabled:isSaving||usernameAvailable===false||usernameAvailable==='check',children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C \\u0438\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u044F\"}),notification&&/*#__PURE__*/_jsx(\"div\",{className:\"notification\",children:notification})]}),JSON.stringify(profile)!==JSON.stringify(editedProfile)&&showSaved&&/*#__PURE__*/_jsx(\"div\",{className:\"profile-buttons\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowSaved(!showSaved),children:showSaved?'Показать изменённую версию':'Показать сохранённую версию'})}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-submenu\",children:[/*#__PURE__*/_jsx(\"span\",{className:subSection==='about'?'active':'',onClick:()=>setSubSection('about'),children:\"\\u041E \\u0441\\u0435\\u0431\\u0435\"}),/*#__PURE__*/_jsx(\"span\",{className:subSection==='media'?'active':'',onClick:()=>setSubSection('media'),children:\"\\u041C\\u0435\\u0434\\u0438\\u0430\"}),/*#__PURE__*/_jsx(\"span\",{className:subSection==='music'?'active':'',onClick:()=>setSubSection('music'),children:\"\\u041C\\u0443\\u0437\\u044B\\u043A\\u0430\"}),/*#__PURE__*/_jsx(\"span\",{className:subSection==='verification'?'active':'',onClick:()=>setSubSection('verification'),children:\"\\u0412\\u0435\\u0440\\u0438\\u0444\\u0438\\u043A\\u0430\\u0446\\u0438\\u044F\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"profile-settings-content\",children:renderSubSection()})]});};export default ProfileSettings;","map":{"version":3,"names":["React","useState","useEffect","createClient","p","load","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","supabase","ProfileSettings","subSection","setSubSection","profile","setProfile","editedProfile","setEditedProfile","tags","setTags","usernameAvailable","setUsernameAvailable","isSaving","setIsSaving","loading","setLoading","showSaved","setShowSaved","notification","setNotification","customStatus","setCustomStatus","fetchProfile","data","userData","error","userError","auth","getUser","console","log","window","location","href","query","from","select","eq","user","id","single","JSON","parse","message","timer","setTimeout","username","checkUsernameAvailability","clearTimeout","renderStatus","status","className","statusIndicator","style","backgroundColor","symbol","userStatus","split","length","customStatusIndicator","children","handleChange","field","value","handleTagInput","event","key","target","trim","newTag","join","removeTag","tagToRemove","filter","tag","handleSave","updatedProfile","stringify","update","dataUpdate","errorUpdate","updateUser","firstName","first_name","lastName","last_name","nickname","dispatchEvent","Event","renderSubSection","onChange","e","type","placeholder","avatar_url","src","alt","onError","onClick","alert","cursor","width","height","cover_url","color","onKeyUp","map","about","spinner","container","profileBlock","profileHeader","profileCover","profileAvatar","profileInfo","profileNames","concat","profileTags","profileMenu","menuItem","profileContent","disabled"],"sources":["C:/Users/player/Documents/GitHub/synask-app/src/pages/settings/ProfileSettings.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { createClient } from '@supabase/supabase-js';\r\nimport './ProfileSettings.css';\r\nimport p from './ProfilePreview.module.css';\r\nimport load from '../Loader.module.css';\r\n\r\nconst supabase = createClient('https://cnicyffiqvdhgyzkogtl.supabase.co', 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNuaWN5ZmZpcXZkaGd5emtvZ3RsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MDc3NDM2NzcsImV4cCI6MjAyMzMxOTY3N30.bZoapdV-TJiq42uJaOPGBfPz91ULReQ1_ahXpUHNaJ8');\r\n\r\nconst ProfileSettings = () => {\r\n    const [subSection, setSubSection] = useState('about');\r\n    const [profile, setProfile] = useState(null);\r\n    const [editedProfile, setEditedProfile] = useState(null);\r\n    const [tags, setTags] = useState([]);\r\n    const [usernameAvailable, setUsernameAvailable] = useState(true);\r\n    const [isSaving, setIsSaving] = useState(false);\r\n    const [loading, setLoading] = useState(true);\r\n    const [showSaved, setShowSaved] = useState(true);\r\n    const [notification, setNotification] = useState('');\r\n    const [customStatus, setCustomStatus] = useState('');\r\n\r\n    useEffect(() => {\r\n        const fetchProfile = async () => {\r\n            try {\r\n                const { data: userData, error: userError } = await supabase.auth.getUser();\r\n                if (userError || !userData) {\r\n                    console.log('No active session found.');\r\n                    window.location.href = '/login';\r\n                    return;\r\n                }\r\n\r\n                let query = supabase\r\n                    .from('users_public_information')\r\n                    .select('id, username, first_name, last_name, avatar_url, cover_url, status, tags')\r\n                    .eq('auth_id', userData.user.id)\r\n                    .single();\r\n\r\n                const { data, error } = await query;\r\n                if (error) {\r\n                    throw error;\r\n                }\r\n\r\n                setProfile(data);\r\n                setEditedProfile(data);\r\n                setTags(JSON.parse(data.tags || '[]'));\r\n            } catch (error) {\r\n                console.error('Error fetching user information:', error.message);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchProfile();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        setUsernameAvailable('check');\r\n        const timer = setTimeout(() => {\r\n            if (editedProfile && editedProfile.username !== profile.username) {\r\n                checkUsernameAvailability(editedProfile.username);\r\n            } else if (editedProfile) {\r\n                setUsernameAvailable(null);\r\n            }\r\n        }, 3000);\r\n\r\n        return () => clearTimeout(timer);\r\n    }, [editedProfile?.username]);\r\n\r\n    const renderStatus = (status) => {\r\n        if (status === 'online') {\r\n            return <div className={p.statusIndicator} data-status={status} style={{ backgroundColor: 'green' }} />;\r\n        } else if (status === 'offline') {\r\n            return <div className={p.statusIndicator} data-status={status} style={{ backgroundColor: 'gray' }} />;\r\n        } else if (status) {\r\n            const [symbol, userStatus] = status.split(':');\r\n            if (userStatus && symbol.length < 4) {\r\n                return (\r\n                    <div className={p.customStatusIndicator} data-status={userStatus}>\r\n                        {symbol}\r\n                    </div>\r\n                );\r\n            }\r\n            return (\r\n                <div className={p.customStatusIndicator} data-status={status}>\r\n                    💬\r\n                </div>\r\n            );\r\n        } else {\r\n            return;\r\n        }\r\n    };\r\n\r\n    const checkUsernameAvailability = async (username) => {\r\n        const { data, error } = await supabase\r\n            .from('users_public_information')\r\n            .select('id')\r\n            .eq('username', username)\r\n            .single();\r\n\r\n        setUsernameAvailable(!data);\r\n    };\r\n\r\n    const handleChange = (field, value) => {\r\n        if (field === 'status' && value !== 'custom') {\r\n            setCustomStatus(false);\r\n            setEditedProfile({\r\n                ...editedProfile,\r\n                status: value,\r\n            });\r\n        } else if (field === 'custom_status') {\r\n            setCustomStatus(value);\r\n            setEditedProfile({\r\n                ...editedProfile,\r\n                status: value,\r\n            });\r\n        } else {\r\n            setEditedProfile({\r\n                ...editedProfile,\r\n                [field]: value,\r\n            });\r\n        }\r\n    };\r\n\r\n\r\n    const handleTagInput = (event) => {\r\n        if (event.key === 'Enter' && event.target.value.trim() && tags.length < 5) {\r\n            const newTag = event.target.value.trim();\r\n            if (newTag.length <= 15 && tags.join('').length + newTag.length <= 60) {\r\n                setTags([...tags, newTag]);\r\n                event.target.value = '';\r\n            }\r\n        }\r\n    };\r\n\r\n    const removeTag = (tagToRemove) => {\r\n        setTags(tags.filter(tag => tag !== tagToRemove));\r\n    };\r\n\r\n    const handleSave = async () => {\r\n        setIsSaving(true);\r\n        setNotification('');\r\n        const updatedProfile = {\r\n            ...editedProfile,\r\n            status: customStatus || editedProfile.status,\r\n            tags: JSON.stringify(tags),\r\n        };\r\n\r\n        const { data: userData, error: userError } = await supabase.auth.getUser();\r\n        if (userError || !userData) {\r\n            console.log('No active session found.');\r\n            window.location.href = '/login';\r\n            return;\r\n        }\r\n\r\n        const { data, error } = await supabase\r\n            .from('users_public_information')\r\n            .update(updatedProfile)\r\n            .eq('auth_id', userData.user.id);\r\n\r\n        if (error) {\r\n            setNotification('Ошибка сохранения данных в базу данных');\r\n            console.error('Error updating profile:', error.message);\r\n            return;\r\n        }\r\n\r\n        const { dataUpdate, errorUpdate} = await supabase.auth.updateUser({\r\n            data: {\r\n                firstName: updatedProfile.first_name,\r\n                lastName: updatedProfile.last_name,\r\n                nickname: updatedProfile.username,\r\n            }\r\n        })\r\n\r\n        if (errorUpdate) {\r\n            setNotification('Ошибка сохранения данных для пользователя');\r\n            console.error('Error updating profile:', error.message);\r\n        } else {\r\n            setProfile(updatedProfile);\r\n            setEditedProfile(updatedProfile);\r\n            setNotification('Данные успешно сохранены');\r\n            window.dispatchEvent(new Event('profileUpdated')); // Custom event for updating dependent components\r\n        }\r\n\r\n        setIsSaving(false);\r\n    };\r\n\r\n    const renderSubSection = () => {\r\n        switch (subSection) {\r\n            case 'about':\r\n                return (\r\n                    <div>\r\n                        <h3>О себе</h3>\r\n                        <div className=\"setting-item\">\r\n                            <label>Статус:</label>\r\n                            <select\r\n                                value={editedProfile?.status === 'online' || editedProfile?.status === 'offline' ? editedProfile?.status : 'custom'}\r\n                                onChange={(e) => {\r\n                                    const value = e.target.value;\r\n                                    if (value === 'custom') {\r\n                                        handleChange('status', customStatus);\r\n                                    } else {\r\n                                        handleChange('status', value);\r\n                                    }\r\n                                }}\r\n                                className={profile.status !== editedProfile.status ? 'changed' : ''}\r\n                            >\r\n                                <option value=\"online\">Онлайн</option>\r\n                                <option value=\"offline\">Офлайн</option>\r\n                                <option value=\"custom\">Пользовательский статус</option>\r\n                            </select>\r\n                            {editedProfile?.status != 'online' && editedProfile?.status != 'offline' && (\r\n                                <>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={customStatus || editedProfile?.status || ''}\r\n                                        onChange={(e) => handleChange('custom_status', e.target.value)}\r\n                                        placeholder=\"Введите свой статус\"\r\n                                        className=\"custom-status-input\"\r\n                                    />\r\n                                    {editedProfile?.status === '' && (\r\n                                        <div className=\"message\">\r\n                                            Оставьте поле пустым, если хотите удалить статус\r\n                                        </div>\r\n                                    )}\r\n                                </>\r\n                            )}\r\n                        </div>\r\n                        <div className=\"setting-item\">\r\n                            <label>Аватар:</label>\r\n                            <input\r\n                                type=\"url\"\r\n                                value={editedProfile?.avatar_url || ''}\r\n                                onChange={(e) => handleChange('avatar_url', e.target.value)}\r\n                                placeholder=\"Введите URL аватара\"\r\n                                className={profile.avatar_url !== editedProfile.avatar_url ? 'changed' : ''}\r\n                            />\r\n                            {editedProfile?.avatar_url && (\r\n                                <div>\r\n                                    <img\r\n                                        src={editedProfile.avatar_url}\r\n                                        alt=\"Avatar Preview\"\r\n                                        onError={(e) => e.target.src = 'error_search-image.png'}\r\n                                        onClick={() => alert('Не удалось получить изображение')}\r\n                                        style={{ cursor: 'pointer', width: '50px', height: '50px' }}\r\n                                    />\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                        <div className=\"setting-item\">\r\n                            <label>Обложка:</label>\r\n                            <input\r\n                                type=\"url\"\r\n                                value={editedProfile?.cover_url || ''}\r\n                                onChange={(e) => handleChange('cover_url', e.target.value)}\r\n                                placeholder=\"Введите URL обложки\"\r\n                                className={profile.cover_url !== editedProfile.cover_url ? 'changed' : ''}\r\n                            />\r\n                            {editedProfile?.cover_url && (\r\n                                <div>\r\n                                    <img\r\n                                        src={editedProfile.cover_url}\r\n                                        alt=\"Cover Preview\"\r\n                                        onError={(e) => e.target.src = 'error_search-image.png'}\r\n                                        onClick={() => alert('Не удалось получить изображение')}\r\n                                        style={{ cursor: 'pointer', width: '50px', height: '50px' }}\r\n                                    />\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                        <div className=\"setting-item\">\r\n                            <label>Имя:</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                value={editedProfile?.first_name || ''}\r\n                                onChange={(e) => handleChange('first_name', e.target.value)}\r\n                                className={profile.first_name !== editedProfile.first_name ? 'changed' : ''}\r\n                            />\r\n                        </div>\r\n                        <div className=\"setting-item\">\r\n                            <label>Фамилия:</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                value={editedProfile?.last_name || ''}\r\n                                onChange={(e) => handleChange('last_name', e.target.value)}\r\n                                className={profile.last_name !== editedProfile.last_name ? 'changed' : ''}\r\n                            />\r\n                        </div>\r\n                        <div className=\"setting-item\">\r\n                            <label>Username:</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                value={editedProfile?.username || ''}\r\n                                onChange={(e) => handleChange('username', e.target.value)}\r\n                                className={usernameAvailable === false ? 'error' : (profile.username !== editedProfile.username ? 'changed' : '')}\r\n                            />\r\n                            {profile.username === editedProfile.username && (\r\n                                <div className=\"saved-username\">Этот ник уже стоит у пользователя</div>\r\n                            )}\r\n                            {usernameAvailable === 'check' && <span>Проверка...</span>}\r\n                            {usernameAvailable === true && <span style={{ color: 'green' }}>Этот ник свободен</span>}\r\n                            {usernameAvailable === false && <span style={{ color: 'red' }}>Этот ник занят</span>}\r\n                        </div>\r\n                        <div className=\"setting-item\">\r\n                            <label>Теги:</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder=\"Введите тег и нажмите Enter\"\r\n                                onKeyUp={handleTagInput}\r\n                            />\r\n                            <div className=\"tags\">\r\n                                {tags.map(tag => (\r\n                                    <div key={tag} className=\"tag\">\r\n                                        {tag}\r\n                                        <span onClick={() => removeTag(tag)}>x</span>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"setting-item\">\r\n                            <label>О себе:</label>\r\n                            <textarea\r\n                                placeholder=\"Напишите о себе\"\r\n                                value={editedProfile?.about || ''}\r\n                                onChange={(e) => handleChange('about', e.target.value)}\r\n                                className={profile.about !== editedProfile.about ? 'changed' : ''}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                );\r\n            case 'media':\r\n                return (\r\n                    <div>\r\n                        <h3>Медиа</h3>\r\n                        <div className=\"media-actions\">\r\n                            <button>Добавить фото/видео</button>\r\n                            <button>Выделить</button>\r\n                            <input type=\"text\" placeholder=\"Поиск по описанию\" />\r\n                            {/* другие действия */}\r\n                        </div>\r\n                        <div className=\"media-gallery\">\r\n                            {/* Галерея фото/видео */}\r\n                        </div>\r\n                    </div>\r\n                );\r\n            case 'music':\r\n                return (\r\n                    <div>\r\n                        <h3>Музыка</h3>\r\n                        <div className=\"music-actions\">\r\n                            <button>Добавить трек</button>\r\n                            <input type=\"text\" placeholder=\"Поиск по названию или артисту\"\r\n                            />\r\n                            {/* другие действия */}\r\n                        </div>\r\n                        <div className=\"music-list\">\r\n                            {/* Список треков */}\r\n                        </div>\r\n                    </div>\r\n                );\r\n            case 'verification':\r\n                return (\r\n                    <div>\r\n                        <h3>Верификация</h3>\r\n                        <div className=\"verification-service\">\r\n                            <img src=\"https://cubiq.ru/wp-content/uploads/2020/09/twitchprime.jpg\" className=\"service-icon\" />\r\n                            <div className=\"service-info\">\r\n                                <p>Никнейм: user123</p>\r\n                                <p>Фоловеры: 12,000</p>\r\n                                <p>Требования:</p>\r\n                                <ul>\r\n                                    <li>10,000 фоловеров <span>✔</span></li>\r\n                                    <li>Стримы каждую неделю <span>✔</span></li>\r\n                                    <li>Приемлемое количество просмотров <span>✔</span></li>\r\n                                </ul>\r\n                                <p>Вы медийная личность <span>✔</span></p>\r\n                            </div>\r\n                        </div>\r\n                        <button>Подключить новый сервис</button>\r\n                    </div>\r\n                );\r\n            default:\r\n                return <div>О себе</div>;\r\n        }\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className={load.spinner}>\r\n                <div></div>\r\n                <div></div>\r\n                <div></div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h2>Мой профиль</h2>\r\n            <label>Предпросмотр:</label>\r\n            <div className=\"profile-preview\">\r\n                <div className={p.container}>\r\n                    {(showSaved ? profile : editedProfile) && (\r\n                        <div className={p.profileBlock}>\r\n                            <div className={p.profileHeader}>\r\n                                <div className={p.profileCover}>\r\n                                    <img id=\"profile-cover\" src={showSaved ? profile.cover_url : editedProfile.cover_url} alt=\"Cover Photo\" />\r\n                                </div>\r\n                                <div className={p.profileAvatar}>\r\n                                    <img id=\"profile-avatar\" src={showSaved ? profile.avatar_url : editedProfile.avatar_url} alt=\"User Photo\" />\r\n                                    {renderStatus(showSaved ? profile.status : editedProfile.status)}\r\n                                </div>\r\n                                <div className={p.profileInfo}>\r\n                                    <h2 className={p.profileNames}>{`${showSaved ? profile.first_name : editedProfile.first_name} ${showSaved ? profile.last_name : editedProfile.last_name}`}</h2>\r\n                                    <div className={p.profileTags}>{(showSaved ? JSON.parse(profile.tags || '[]') : tags).map(tag => <span key={tag} className={p.tag}>{tag}</span>)}</div>\r\n                                </div>\r\n                            </div>\r\n                            <div className={p.profileMenu}>\r\n                                <div className={p.menuItem}>About</div>\r\n                                <div className={p.menuItem}>Events</div>\r\n                                <div className={p.menuItem}>Media</div>\r\n                                <div className={p.menuItem}>Friends</div>\r\n                                <div className={p.menuItem}>Groups</div>\r\n                                <div className={p.menuItem}>Settings</div>\r\n                            </div>\r\n                            <div className={p.profileContent}></div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n            {JSON.stringify(profile) !== JSON.stringify(editedProfile) && !showSaved && (\r\n                <div className=\"profile-buttons\">\r\n                    <button onClick={() => setShowSaved(!showSaved)}>\r\n                        {showSaved ? 'Показать изменённую версию' : 'Показать сохранённую версию'}\r\n                    </button>\r\n                    <button onClick={handleSave} disabled={isSaving || usernameAvailable === false || usernameAvailable === 'check'}>Сохранить изменения</button>\r\n                    {notification && <div className=\"notification\">{notification}</div>}\r\n                </div>\r\n            )}\r\n            {JSON.stringify(profile) !== JSON.stringify(editedProfile) && showSaved && (\r\n                <div className=\"profile-buttons\">\r\n                    <button onClick={() => setShowSaved(!showSaved)}>\r\n                        {showSaved ? 'Показать изменённую версию' : 'Показать сохранённую версию'}\r\n                    </button>\r\n                </div>\r\n            )}\r\n            <div className=\"profile-submenu\">\r\n                <span className={subSection === 'about' ? 'active' : ''} onClick={() => setSubSection('about')}>О себе</span>\r\n                <span className={subSection === 'media' ? 'active' : ''} onClick={() => setSubSection('media')}>Медиа</span>\r\n                <span className={subSection === 'music' ? 'active' : ''} onClick={() => setSubSection('music')}>Музыка</span>\r\n                <span className={subSection === 'verification' ? 'active' : ''} onClick={() => setSubSection('verification')}>Верификация</span>\r\n            </div>\r\n            <div className=\"profile-settings-content\">\r\n                {renderSubSection()}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ProfileSettings;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}