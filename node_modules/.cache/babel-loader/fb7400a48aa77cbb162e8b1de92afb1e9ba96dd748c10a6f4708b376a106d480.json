{"ast":null,"code":"import React,{useState,useEffect,useContext}from'react';import ReactQuill from'react-quill';import'react-quill/dist/quill.snow.css';import getSupabaseClient from'../config/SupabaseClient';import'./ProfileSettings.css';import p from'../Profile.module.css';import load from'../Loader.module.css';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faEye,faSave,faTimes,faToggleOn,faToggleOff}from'@fortawesome/free-solid-svg-icons';import AccentColorContext from'./AccentColorContext';import DOMPurify from'dompurify';import{faPhone,faBuilding,faGraduationCap,faEdit,faStar,faEnvelope,faUserPlus,faShare,faChevronDown,faInfoCircle,faImages,faLink}from'@fortawesome/free-solid-svg-icons';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const supabase=getSupabaseClient();const ProfileSettings=()=>{const[tags,setTags]=useState([]);const[subSection,setSubSection]=useState('about');const[profile,setProfile]=useState(null);const[editedProfile,setEditedProfile]=useState(null);const[usernameAvailable,setUsernameAvailable]=useState(true);const[phone,setPhone]=useState((editedProfile===null||editedProfile===void 0?void 0:editedProfile.phone)||'');const[email,setEmail]=useState((editedProfile===null||editedProfile===void 0?void 0:editedProfile.email)||'');const[isSaving,setIsSaving]=useState(false);const[loading,setLoading]=useState(true);const[showSaved,setShowSaved]=useState(true);const[notification,setNotification]=useState('');const[customStatus,setCustomStatus]=useState('');const[isPreviewOpen,setIsPreviewOpen]=useState(false);const[isSavedVersion,setIsSavedVersion]=useState(true);const[image,setImage]=useState(null);const[imageUrl,setImageUrl]=useState('');const[charCount,setCharCount]=useState((editedProfile===null||editedProfile===void 0?void 0:editedProfile.description.length)||0);const[editorValue,setEditorValue]=useState((editedProfile===null||editedProfile===void 0?void 0:editedProfile.description)||'');// Состояния и хуки для обработки предпросмотра изображений и обработки ошибок\nconst[avatarError,setAvatarError]=useState(false);const[coverError,setCoverError]=useState(false);// Сброс ошибок при изменении URL\nuseEffect(()=>{setAvatarError(false);},[editedProfile===null||editedProfile===void 0?void 0:editedProfile.avatar_url]);useEffect(()=>{setCoverError(false);},[editedProfile===null||editedProfile===void 0?void 0:editedProfile.cover_url]);// Валидация номера телефона и почты\nconst isValidPhoneNumber=phone=>{const phonePattern=/^\\+\\d{1,3} \\d{3} \\d{3}-\\d{2}-\\d{2}$/;return phone?phonePattern.test(phone):true;};const isValidEmail=email=>{const emailPattern=/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;return email?emailPattern.test(email):true;};// Cостояние для отслеживания счетчиков символов и проверок\nconst[charCounts,setCharCounts]=useState({avatar_url:0,cover_url:0,custom_status:0,first_name:0,last_name:0,username:0,work_infp:0,education_info:0,display_phone:0,display_email:0});const[isFormValid,setIsFormValid]=useState(true);useEffect(()=>{if(editedProfile){var _editedProfile$avatar,_editedProfile$cover_,_editedProfile$status,_editedProfile$first_,_editedProfile$last_n,_editedProfile$userna,_editedProfile$work_i,_editedProfile$educat,_editedProfile$displa,_editedProfile$displa2;setCharCounts({avatar_url:((_editedProfile$avatar=editedProfile.avatar_url)===null||_editedProfile$avatar===void 0?void 0:_editedProfile$avatar.length)||0,cover_url:((_editedProfile$cover_=editedProfile.cover_url)===null||_editedProfile$cover_===void 0?void 0:_editedProfile$cover_.length)||0,custom_status:((_editedProfile$status=editedProfile.status)===null||_editedProfile$status===void 0?void 0:_editedProfile$status.length)||0,first_name:((_editedProfile$first_=editedProfile.first_name)===null||_editedProfile$first_===void 0?void 0:_editedProfile$first_.length)||0,last_name:((_editedProfile$last_n=editedProfile.last_name)===null||_editedProfile$last_n===void 0?void 0:_editedProfile$last_n.length)||0,username:((_editedProfile$userna=editedProfile.username)===null||_editedProfile$userna===void 0?void 0:_editedProfile$userna.length)||0,work_info:((_editedProfile$work_i=editedProfile.work_info)===null||_editedProfile$work_i===void 0?void 0:_editedProfile$work_i.length)||0,education_info:((_editedProfile$educat=editedProfile.education_info)===null||_editedProfile$educat===void 0?void 0:_editedProfile$educat.length)||0,display_phone:((_editedProfile$displa=editedProfile.display_phone)===null||_editedProfile$displa===void 0?void 0:_editedProfile$displa.length)||0,display_email:((_editedProfile$displa2=editedProfile.display_email)===null||_editedProfile$displa2===void 0?void 0:_editedProfile$displa2.length)||0});setCharCount(editedProfile.description.length||0);}},[editedProfile]);useEffect(()=>{const fetchProfile=async()=>{try{const{data:userData,error:userError}=await supabase.auth.getUser();if(userError||!userData){console.log('No active session found.');window.location.href='/login';return;}let query=supabase.from('users_public_information').select('*').eq('auth_id',userData.user.id).single();const{data,error}=await query;if(error){throw error;}setProfile(data);setEditorValue(data.description);setEditedProfile(data);setTags(JSON.parse(data.tags||'[]'));}catch(error){console.error('Error fetching user information:',error.message);}finally{setLoading(false);}};fetchProfile();},[]);useEffect(()=>{setUsernameAvailable('check');const timer=setTimeout(()=>{if(editedProfile&&editedProfile.username!==profile.username){checkUsernameAvailability(editedProfile.username);}else if(editedProfile){setUsernameAvailable(null);}},3000);return()=>clearTimeout(timer);},[editedProfile===null||editedProfile===void 0?void 0:editedProfile.username]);const checkUsernameAvailability=async username=>{const{data,error}=await supabase.from('users_public_information').select('id').eq('username',username).single();setUsernameAvailable(!data);};const handleChange=(field,value)=>{const maxLengths={avatar_url:200,cover_url:200,custom_status:30,first_name:20,last_name:20,username:20,description:1050,work_info:30,education_info:30,display_phone:18,display_email:30};//console.log(value.length, value);\nif(field==='status'&&value!=='custom'){setCustomStatus(false);setEditedProfile({...editedProfile,status:value});}else if(field==='custom_status'){setCustomStatus(value);setEditedProfile({...editedProfile,status:value});}else{setEditedProfile({...editedProfile,[field]:value});}setCharCounts(prevCounts=>({...prevCounts,[field]:value.length}));const isFieldValid=value.length<=maxLengths[field];setIsFormValid(isFieldValid);};const handleTagInput=event=>{if(event.key==='Enter'&&event.target.value.trim()&&tags.length<5){const newTag=event.target.value.trim();if(newTag.length<=15&&tags.join('').length+newTag.length<=60){const newTags=[...tags,newTag];setTags(newTags);setEditedProfile({...editedProfile,tags:JSON.stringify(newTags)});event.target.value='';}}};const removeTag=tagToRemove=>{const updatedTags=tags.filter(tag=>tag!==tagToRemove);setTags(updatedTags);setEditedProfile({...editedProfile,tags:JSON.stringify(updatedTags)});};const handleSave=async()=>{setIsSaving(true);setNotification('');const updatedProfile={...editedProfile,status:customStatus||editedProfile.status,tags:JSON.stringify(tags)};const{data:userData,error:userError}=await supabase.auth.getUser();if(userError||!userData){console.log('No active session found.');window.location.href='/login';return;}const{data,error}=await supabase.from('users_public_information').update(updatedProfile).eq('auth_id',userData.user.id);if(error){setNotification('Ошибка сохранения данных в базу данных');console.error('Error updating profile:',error.message);return;}const{dataUpdate,errorUpdate}=await supabase.auth.updateUser({data:{firstName:updatedProfile.first_name,lastName:updatedProfile.last_name,nickname:updatedProfile.username}});if(errorUpdate){setNotification('Ошибка сохранения данных для пользователя');console.error('Error updating profile:',error.message);}else{setProfile(updatedProfile);setEditedProfile(updatedProfile);setNotification('Данные успешно сохранены');window.dispatchEvent(new Event('profileUpdated'));// Custom event for updating dependent components\n}setIsSaving(false);};const togglePreview=()=>{setIsPreviewOpen(!isPreviewOpen);};const handleVersionToggle=()=>{setIsSavedVersion(!isSavedVersion);};const closePreview=()=>{setIsPreviewOpen(false);};/*\r\n    const handleImageChange = (e) => {\r\n        const file = e.target.files[0];\r\n        if (file) {\r\n            setImageUrl(URL.createObjectURL(file));\r\n            setShowCropper(true);\r\n        }\r\n    };\r\n    */const renderEditor=()=>{const imageHandler=()=>{const url=prompt('Введите URL изображения:');if(url){const quill=this.quill;const range=quill.getSelection();quill.insertEmbed(range.index,'image',url);}};const handleTextChange=content=>{// Проверяем длину текста\nsetCharCount(content.length);console.log(content.length,content);setEditorValue(content);handleChange('description',content);};return/*#__PURE__*/_jsxs(\"div\",{className:\"editor-container\",children:[/*#__PURE__*/_jsx(ReactQuill,{value:editorValue,\"data-gramm\":\"true\",onChange:handleTextChange,modules:{toolbar:{container:[[{'header':'1'},{'header':'2'},{'font':[]}],[{'list':'ordered'},{'list':'bullet'}],['bold','italic','underline','blockquote'],[{'color':[]},{'background':[]}],// Цвет текста и фона\n['link','blockquote'],[{'align':[]}],['clean']]}},placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0442\\u0435\\u043A\\u0441\\u0442 \\u0437\\u0434\\u0435\\u0441\\u044C...\"}),/*#__PURE__*/_jsxs(\"span\",{className:charCount>1050?'char-counter-error':'char-counter',children:[charCount,\" / 1050\"]})]});};const renderSubSection=()=>{switch(subSection){case'about':return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u041E \\u0441\\u0435\\u0431\\u0435\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441:\"}),/*#__PURE__*/_jsxs(\"select\",{value:(editedProfile===null||editedProfile===void 0?void 0:editedProfile.status)==='online'||(editedProfile===null||editedProfile===void 0?void 0:editedProfile.status)==='offline'?editedProfile===null||editedProfile===void 0?void 0:editedProfile.status:'custom',onChange:e=>{const value=e.target.value;if(value==='custom'){handleChange('status',customStatus);}else{handleChange('status',value);}},className:profile.status!==editedProfile.status?'changed':'',children:[/*#__PURE__*/_jsx(\"option\",{value:\"online\",children:\"\\u041E\\u043D\\u043B\\u0430\\u0439\\u043D\"}),/*#__PURE__*/_jsx(\"option\",{value:\"offline\",children:\"\\u041E\\u0444\\u043B\\u0430\\u0439\\u043D\"}),/*#__PURE__*/_jsx(\"option\",{value:\"custom\",children:\"\\u041F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C\\u0441\\u043A\\u0438\\u0439 \\u0441\\u0442\\u0430\\u0442\\u0443\\u0441\"})]}),(editedProfile===null||editedProfile===void 0?void 0:editedProfile.status)!='online'&&(editedProfile===null||editedProfile===void 0?void 0:editedProfile.status)!='offline'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:customStatus||(editedProfile===null||editedProfile===void 0?void 0:editedProfile.status)||'',onChange:e=>handleChange('custom_status',e.target.value),placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0441\\u0432\\u043E\\u0439 \\u0441\\u0442\\u0430\\u0442\\u0443\\u0441\",className:\"custom-status-input\",className:charCounts.custom_status>30?'input-error':''}),/*#__PURE__*/_jsxs(\"span\",{className:charCounts.custom_status>30?'char-counter-error':'char-counter',children:[charCounts.custom_status,\" / 30\"]}),(editedProfile===null||editedProfile===void 0?void 0:editedProfile.status)===''&&/*#__PURE__*/_jsx(\"div\",{className:\"message\",children:\"\\u041E\\u0441\\u0442\\u0430\\u0432\\u044C\\u0442\\u0435 \\u043F\\u043E\\u043B\\u0435 \\u043F\\u0443\\u0441\\u0442\\u044B\\u043C, \\u0435\\u0441\\u043B\\u0438 \\u0445\\u043E\\u0442\\u0438\\u0442\\u0435 \\u0443\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u0441\\u0442\\u0430\\u0442\\u0443\\u0441\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0410\\u0432\\u0430\\u0442\\u0430\\u0440:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",value:editedProfile.avatar_url||'',onChange:e=>handleChange('avatar_url',e.target.value),placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 URL \\u0430\\u0432\\u0430\\u0442\\u0430\\u0440\\u0430\",className:charCounts.avatar_url>200?'input-error':''}),/*#__PURE__*/_jsxs(\"span\",{className:charCounts.avatar_url>200?'char-counter-error':'char-counter',children:[charCounts.avatar_url,\" / 200\"]}),(editedProfile===null||editedProfile===void 0?void 0:editedProfile.avatar_url)&&/*#__PURE__*/_jsx(\"div\",{children:avatarError?/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:\"\\u041D\\u0435 \\u0443\\u0434\\u0430\\u043B\\u043E\\u0441\\u044C \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435 \\u0430\\u0432\\u0430\\u0442\\u0430\\u0440\\u0430\"}):/*#__PURE__*/_jsx(\"img\",{src:editedProfile.avatar_url,alt:\"Avatar Preview\",onError:()=>setAvatarError(true),style:{cursor:'pointer',width:'50px',height:'50px'}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u041E\\u0431\\u043B\\u043E\\u0436\\u043A\\u0430:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",value:editedProfile.cover_url||'',onChange:e=>handleChange('cover_url',e.target.value),placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 URL \\u043E\\u0431\\u043B\\u043E\\u0436\\u043A\\u0438\",className:charCounts.cover_url>200?'input-error':''}),/*#__PURE__*/_jsxs(\"span\",{className:charCounts.cover_url>200?'char-counter-error':'char-counter',children:[charCounts.cover_url,\" / 200\"]}),(editedProfile===null||editedProfile===void 0?void 0:editedProfile.cover_url)&&/*#__PURE__*/_jsx(\"div\",{children:coverError?/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:\"\\u041D\\u0435 \\u0443\\u0434\\u0430\\u043B\\u043E\\u0441\\u044C \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435 \\u043E\\u0431\\u043B\\u043E\\u0436\\u043A\\u0438\"}):/*#__PURE__*/_jsx(\"img\",{src:editedProfile.cover_url,alt:\"Cover Preview\",onError:()=>setCoverError(true),style:{cursor:'pointer',width:'50px',height:'50px'}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0418\\u043C\\u044F:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:(editedProfile===null||editedProfile===void 0?void 0:editedProfile.first_name)||'',onChange:e=>handleChange('first_name',e.target.value),className:charCounts.first_name>20?'input-error':''}),/*#__PURE__*/_jsxs(\"span\",{className:charCounts.first_name>20?'char-counter-error':'char-counter',children:[charCounts.first_name,\" / 20\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0424\\u0430\\u043C\\u0438\\u043B\\u0438\\u044F:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:(editedProfile===null||editedProfile===void 0?void 0:editedProfile.last_name)||'',onChange:e=>handleChange('last_name',e.target.value),className:charCounts.last_name>20?'input-error':''}),/*#__PURE__*/_jsxs(\"span\",{className:charCounts.last_name>20?'char-counter-error':'char-counter',children:[charCounts.last_name,\" / 20\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:(editedProfile===null||editedProfile===void 0?void 0:editedProfile.username)||'',onChange:e=>handleChange('username',e.target.value),className:charCounts.username>20?'input-error':''}),/*#__PURE__*/_jsxs(\"span\",{className:charCounts.username>20?'char-counter-error':'char-counter',children:[charCounts.username,\" / 20\"]}),profile.username===editedProfile.username&&/*#__PURE__*/_jsx(\"div\",{className:\"saved-username\",children:\"\\u042D\\u0442\\u043E\\u0442 \\u043D\\u0438\\u043A \\u0443\\u0436\\u0435 \\u0441\\u0442\\u043E\\u0438\\u0442 \\u0443 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\"}),usernameAvailable==='check'&&/*#__PURE__*/_jsx(\"span\",{children:\"\\u041F\\u0440\\u043E\\u0432\\u0435\\u0440\\u043A\\u0430...\"}),usernameAvailable===true&&/*#__PURE__*/_jsx(\"span\",{style:{color:'green'},children:\"\\u042D\\u0442\\u043E\\u0442 \\u043D\\u0438\\u043A \\u0441\\u0432\\u043E\\u0431\\u043E\\u0434\\u0435\\u043D\"}),usernameAvailable===false&&/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\"\\u042D\\u0442\\u043E\\u0442 \\u043D\\u0438\\u043A \\u0437\\u0430\\u043D\\u044F\\u0442\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0422\\u0435\\u0433\\u0438:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0442\\u0435\\u0433 \\u0438 \\u043D\\u0430\\u0436\\u043C\\u0438\\u0442\\u0435 Enter\",onKeyUp:handleTagInput}),/*#__PURE__*/_jsx(\"div\",{className:\"tags\",children:tags.map(tag=>/*#__PURE__*/_jsxs(\"div\",{className:\"tag\",children:[tag,/*#__PURE__*/_jsx(\"span\",{onClick:()=>removeTag(tag),children:\"x\"})]},tag))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u041D\\u043E\\u043C\\u0435\\u0440 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\\u0430:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:(editedProfile===null||editedProfile===void 0?void 0:editedProfile.display_phone)||'',onChange:e=>handleChange('display_phone',e.target.value),placeholder:\"+X XXX XXX-XX-XX\",className:!isValidPhoneNumber(editedProfile===null||editedProfile===void 0?void 0:editedProfile.display_phone)?'input-error':''}),!isValidPhoneNumber(editedProfile===null||editedProfile===void 0?void 0:editedProfile.display_phone)&&/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\"\\u041D\\u0435\\u0432\\u0435\\u0440\\u043D\\u044B\\u0439 \\u0444\\u043E\\u0440\\u043C\\u0430\\u0442 \\u043D\\u043E\\u043C\\u0435\\u0440\\u0430\"}),/*#__PURE__*/_jsxs(\"span\",{className:charCounts.display_phone>18?'char-counter-error':'char-counter',children:[charCounts.display_phone,\" / 18\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u041F\\u043E\\u0447\\u0442\\u0430:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:(editedProfile===null||editedProfile===void 0?void 0:editedProfile.display_email)||'',onChange:e=>handleChange('display_email',e.target.value),placeholder:\"example@mail.com\",className:!isValidEmail(editedProfile===null||editedProfile===void 0?void 0:editedProfile.display_email)?'input-error':''}),!isValidEmail(editedProfile===null||editedProfile===void 0?void 0:editedProfile.display_email)&&/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\"\\u041D\\u0435\\u0432\\u0435\\u0440\\u043D\\u044B\\u0439 \\u0444\\u043E\\u0440\\u043C\\u0430\\u0442 \\u043F\\u043E\\u0447\\u0442\\u044B\"}),/*#__PURE__*/_jsxs(\"span\",{className:charCounts.display_email>30?'char-counter-error':'char-counter',children:[charCounts.display_email,\" / 30\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u041E\\u0431\\u0440\\u0430\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\\u0435 \\u0443\\u0447\\u0440\\u0435\\u0436\\u0434\\u0435\\u043D\\u0438\\u0435:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:(editedProfile===null||editedProfile===void 0?void 0:editedProfile.education_info)||'',onChange:e=>handleChange('education_info',e.target.value)}),/*#__PURE__*/_jsxs(\"span\",{className:charCounts.education_info>30?'char-counter-error':'char-counter',children:[charCounts.education_info,\" / 30\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u041C\\u0435\\u0441\\u0442\\u043E \\u0440\\u0430\\u0431\\u043E\\u0442\\u044B:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:(editedProfile===null||editedProfile===void 0?void 0:editedProfile.work_info)||'',onChange:e=>handleChange('work_info',e.target.value)}),/*#__PURE__*/_jsxs(\"span\",{className:charCounts.work_info>30?'char-counter-error':'char-counter',children:[charCounts.work_info,\" / 30\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435 \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044F\"}),renderEditor()]})]});case'media':return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u041C\\u0435\\u0434\\u0438\\u0430\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"media-actions\",children:[/*#__PURE__*/_jsx(\"button\",{children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0444\\u043E\\u0442\\u043E/\\u0432\\u0438\\u0434\\u0435\\u043E\"}),/*#__PURE__*/_jsx(\"button\",{children:\"\\u0412\\u044B\\u0434\\u0435\\u043B\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u041F\\u043E\\u0438\\u0441\\u043A \\u043F\\u043E \\u043E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u044E\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"media-gallery\"})]});case'music':return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u041C\\u0443\\u0437\\u044B\\u043A\\u0430\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"music-actions\",children:[/*#__PURE__*/_jsx(\"button\",{children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0442\\u0440\\u0435\\u043A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u041F\\u043E\\u0438\\u0441\\u043A \\u043F\\u043E \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u044E \\u0438\\u043B\\u0438 \\u0430\\u0440\\u0442\\u0438\\u0441\\u0442\\u0443\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"music-list\"})]});case'verification':return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u0412\\u0435\\u0440\\u0438\\u0444\\u0438\\u043A\\u0430\\u0446\\u0438\\u044F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"verification-service\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://cubiq.ru/wp-content/uploads/2020/09/twitchprime.jpg\",className:\"service-icon\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"service-info\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u041D\\u0438\\u043A\\u043D\\u0435\\u0439\\u043C: user123\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0424\\u043E\\u043B\\u043E\\u0432\\u0435\\u0440\\u044B: 12,000\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0422\\u0440\\u0435\\u0431\\u043E\\u0432\\u0430\\u043D\\u0438\\u044F:\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsxs(\"li\",{children:[\"10,000 \\u0444\\u043E\\u043B\\u043E\\u0432\\u0435\\u0440\\u043E\\u0432 \",/*#__PURE__*/_jsx(\"span\",{children:\"\\u2714\"})]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u0421\\u0442\\u0440\\u0438\\u043C\\u044B \\u043A\\u0430\\u0436\\u0434\\u0443\\u044E \\u043D\\u0435\\u0434\\u0435\\u043B\\u044E \",/*#__PURE__*/_jsx(\"span\",{children:\"\\u2714\"})]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u041F\\u0440\\u0438\\u0435\\u043C\\u043B\\u0435\\u043C\\u043E\\u0435 \\u043A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u043F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440\\u043E\\u0432 \",/*#__PURE__*/_jsx(\"span\",{children:\"\\u2714\"})]})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0412\\u044B \\u043C\\u0435\\u0434\\u0438\\u0439\\u043D\\u0430\\u044F \\u043B\\u0438\\u0447\\u043D\\u043E\\u0441\\u0442\\u044C \",/*#__PURE__*/_jsx(\"span\",{children:\"\\u2714\"})]})]})]}),/*#__PURE__*/_jsx(\"button\",{children:\"\\u041F\\u043E\\u0434\\u043A\\u043B\\u044E\\u0447\\u0438\\u0442\\u044C \\u043D\\u043E\\u0432\\u044B\\u0439 \\u0441\\u0435\\u0440\\u0432\\u0438\\u0441\"})]});default:return/*#__PURE__*/_jsx(\"div\",{children:\"\\u041E \\u0441\\u0435\\u0431\\u0435\"});}};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:load.spinner,children:[/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{})]});}return/*#__PURE__*/_jsx(\"div\",{children:isPreviewOpen?/*#__PURE__*/_jsx(\"div\",{className:\"modal-background\",onClick:closePreview,children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:handleVersionToggle,className:\"toggle-version-button\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:isSavedVersion?faToggleOn:faToggleOff}),isSavedVersion?'Сохранённая версия':'Изменённая версия']}),/*#__PURE__*/_jsxs(\"button\",{onClick:closePreview,className:\"close-button\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faTimes}),\" \\u0412\\u0435\\u0440\\u043D\\u0443\\u0442\\u044C\\u0441\\u044F\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"profile-preview\",children:/*#__PURE__*/_jsx(ProfileComponent,{profile:isSavedVersion?profile:editedProfile,tags:tags})})]})}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u041C\\u043E\\u0439 \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\"}),JSON.stringify(profile)!==JSON.stringify(editedProfile)&&/*#__PURE__*/_jsxs(\"div\",{className:\"profile-buttons\",children:[notification&&/*#__PURE__*/_jsx(\"div\",{className:\"notification\",children:notification}),/*#__PURE__*/_jsxs(\"button\",{className:\"save-button\",onClick:handleSave,disabled:isSaving||!isFormValid||!isValidPhoneNumber(editedProfile===null||editedProfile===void 0?void 0:editedProfile.display_phone)||!isValidEmail(editedProfile===null||editedProfile===void 0?void 0:editedProfile.display_email),children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faSave}),\" \\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"preview-button\",onClick:togglePreview,children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faEye}),\" \\u041F\\u0440\\u0435\\u0434\\u043F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-submenu\",children:[/*#__PURE__*/_jsx(\"span\",{className:subSection==='about'?'active':'',onClick:()=>setSubSection('about'),children:\"\\u041E \\u0441\\u0435\\u0431\\u0435\"}),/*#__PURE__*/_jsx(\"span\",{className:subSection==='media'?'active':'',onClick:()=>setSubSection('media'),children:\"\\u041C\\u0435\\u0434\\u0438\\u0430\"}),/*#__PURE__*/_jsx(\"span\",{className:subSection==='music'?'active':'',onClick:()=>setSubSection('music'),children:\"\\u041C\\u0443\\u0437\\u044B\\u043A\\u0430\"}),/*#__PURE__*/_jsx(\"span\",{className:subSection==='verification'?'active':'',onClick:()=>setSubSection('verification'),children:\"\\u0412\\u0435\\u0440\\u0438\\u0444\\u0438\\u043A\\u0430\\u0446\\u0438\\u044F\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"profile-settings-content\",children:renderSubSection()})]})});};const ProfileComponent=_ref=>{let{profile,tags}=_ref;const[activeSection,setActiveSection]=useState('description');const{accentColor}=useContext(AccentColorContext);const ProfileDescription=_ref2=>{let{description}=_ref2;// Очистка HTML перед рендером\nconst sanitizedDescription=DOMPurify.sanitize(description);return/*#__PURE__*/_jsx(\"div\",{className:\"ql-editor\",\"data-gramm\":\"false\",dangerouslySetInnerHTML:{__html:sanitizedDescription}});};const renderStatus=status=>{if(status==='online'){return/*#__PURE__*/_jsx(\"div\",{className:p.statusIndicator,\"data-status\":status,style:{backgroundColor:'green'}});}else if(status==='offline'){return/*#__PURE__*/_jsx(\"div\",{className:p.statusIndicator,\"data-status\":status,style:{backgroundColor:'gray'}});}else if(status){const[symbol,userStatus]=status.split(':');if(userStatus&&symbol.length<4){return/*#__PURE__*/_jsx(\"div\",{className:p.customStatusIndicator,\"data-status\":userStatus,children:symbol});}return/*#__PURE__*/_jsx(\"div\",{className:p.customStatusIndicator,\"data-status\":status,children:\"\\uD83D\\uDCAC\"});}else{return;}};const renderSection=()=>{switch(activeSection){case'description':return/*#__PURE__*/_jsx(ProfileDescription,{description:profile.description});case'media':return/*#__PURE__*/_jsx(\"div\",{children:\"\\u041C\\u0435\\u0434\\u0438\\u0430 \\u043A\\u043E\\u043D\\u0442\\u0435\\u043D\\u0442...\"});case'links':return/*#__PURE__*/_jsx(\"div\",{children:\"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0438...\"});default:return/*#__PURE__*/_jsx(ProfileDescription,{description:profile.description});}};return/*#__PURE__*/_jsx(\"div\",{className:p.container,children:/*#__PURE__*/_jsxs(\"div\",{className:p.profileBlock,style:{borderColor:accentColor},children:[/*#__PURE__*/_jsxs(\"div\",{className:p.profileHeader,children:[/*#__PURE__*/_jsx(\"div\",{className:p.profileCover,children:/*#__PURE__*/_jsx(\"img\",{id:\"profile-cover\",src:profile.cover_url,alt:\"Cover Photo\"})}),/*#__PURE__*/_jsxs(\"div\",{className:p.profileAvatar,children:[/*#__PURE__*/_jsx(\"img\",{id:\"profile-avatar\",src:profile.avatar_url,alt:\"User Photo\"}),renderStatus(profile.status)]}),/*#__PURE__*/_jsx(\"div\",{className:p.profileTags,children:tags.map(tag=>/*#__PURE__*/_jsx(\"span\",{className:p.tag,children:tag},tag))})]}),/*#__PURE__*/_jsxs(\"div\",{className:p.profileInfo,style:{borderColor:accentColor},children:[/*#__PURE__*/_jsx(\"h2\",{className:p.profileNames,children:\"\".concat(profile.first_name,\" \").concat(profile.last_name)}),/*#__PURE__*/_jsxs(\"div\",{className:p.profileUsername,children:[\"@\",profile.username]}),/*#__PURE__*/_jsxs(\"div\",{className:p.userAchievements,children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faStar,title:\"\\u041F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0436\\u0434\\u0451\\u043D\\u043D\\u044B\\u0439 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\",style:{color:'gold'}}),/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faStar,title:\"\\u0417\\u043D\\u0430\\u0447\\u043E\\u043A \\u0442\\u0432\\u0438\\u0447\\u0430\",style:{color:'purple'}}),/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faStar,title:\"\\u0417\\u043D\\u0430\\u0447\\u043E\\u043A \\u0442\\u0435\\u0441\\u0442\\u0438\\u0440\\u043E\\u0432\\u0449\\u0438\\u043A\\u0430\",style:{color:'green'}}),/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faStar,title:\"\\u0417\\u043D\\u0430\\u0447\\u043E\\u043A \\u043E\\u043B\\u0434\\u0430\",style:{color:'blue'}})]})]}),/*#__PURE__*/_jsx(\"div\",{className:p.contactInfo,children:/*#__PURE__*/_jsxs(\"div\",{children:[profile.display_email&&/*#__PURE__*/_jsxs(\"div\",{className:p.contactItem,children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faEnvelope}),\" \",profile.display_email]}),profile.display_phone&&/*#__PURE__*/_jsxs(\"div\",{className:p.contactItem,children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faPhone}),\" \",profile.display_phone]}),profile.work_info&&/*#__PURE__*/_jsxs(\"div\",{className:p.contactItem,children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faBuilding}),\" \",profile.work_info]}),profile.education_info&&/*#__PURE__*/_jsxs(\"div\",{className:p.contactItem,children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faGraduationCap}),\" \",profile.education_info]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:p.profileMenu,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(p.menuItems,\" \").concat(activeSection==='description'?p.active:''),onClick:()=>setActiveSection('description'),children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faInfoCircle}),\" \\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(p.menuItems,\" \").concat(activeSection==='media'?p.active:''),onClick:()=>setActiveSection('media'),children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faImages}),\" \\u041C\\u0435\\u0434\\u0438\\u0430\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(p.menuItems,\" \").concat(activeSection==='links'?p.active:''),onClick:()=>setActiveSection('links'),children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faLink}),\" \\u0421\\u0441\\u044B\\u043B\\u043A\\u0438\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:p.profileContent,children:renderSection()})]})});};export default ProfileSettings;","map":{"version":3,"names":["React","useState","useEffect","useContext","ReactQuill","getSupabaseClient","p","load","FontAwesomeIcon","faEye","faSave","faTimes","faToggleOn","faToggleOff","AccentColorContext","DOMPurify","faPhone","faBuilding","faGraduationCap","faEdit","faStar","faEnvelope","faUserPlus","faShare","faChevronDown","faInfoCircle","faImages","faLink","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","supabase","ProfileSettings","tags","setTags","subSection","setSubSection","profile","setProfile","editedProfile","setEditedProfile","usernameAvailable","setUsernameAvailable","phone","setPhone","email","setEmail","isSaving","setIsSaving","loading","setLoading","showSaved","setShowSaved","notification","setNotification","customStatus","setCustomStatus","isPreviewOpen","setIsPreviewOpen","isSavedVersion","setIsSavedVersion","image","setImage","imageUrl","setImageUrl","charCount","setCharCount","description","length","editorValue","setEditorValue","avatarError","setAvatarError","coverError","setCoverError","avatar_url","cover_url","isValidPhoneNumber","phonePattern","test","isValidEmail","emailPattern","charCounts","setCharCounts","custom_status","first_name","last_name","username","work_infp","education_info","display_phone","display_email","isFormValid","setIsFormValid","_editedProfile$avatar","_editedProfile$cover_","_editedProfile$status","_editedProfile$first_","_editedProfile$last_n","_editedProfile$userna","_editedProfile$work_i","_editedProfile$educat","_editedProfile$displa","_editedProfile$displa2","status","work_info","fetchProfile","data","userData","error","userError","auth","getUser","console","log","window","location","href","query","from","select","eq","user","id","single","JSON","parse","message","timer","setTimeout","checkUsernameAvailability","clearTimeout","handleChange","field","value","maxLengths","prevCounts","isFieldValid","handleTagInput","event","key","target","trim","newTag","join","newTags","stringify","removeTag","tagToRemove","updatedTags","filter","tag","handleSave","updatedProfile","update","dataUpdate","errorUpdate","updateUser","firstName","lastName","nickname","dispatchEvent","Event","togglePreview","handleVersionToggle","closePreview","renderEditor","imageHandler","url","prompt","quill","range","getSelection","insertEmbed","index","handleTextChange","content","className","children","onChange","modules","toolbar","container","placeholder","renderSubSection","e","type","style","color","src","alt","onError","cursor","width","height","onKeyUp","map","onClick","spinner","stopPropagation","icon","ProfileComponent","disabled","_ref","activeSection","setActiveSection","accentColor","ProfileDescription","_ref2","sanitizedDescription","sanitize","dangerouslySetInnerHTML","__html","renderStatus","statusIndicator","backgroundColor","symbol","userStatus","split","customStatusIndicator","renderSection","profileBlock","borderColor","profileHeader","profileCover","profileAvatar","profileTags","profileInfo","profileNames","concat","profileUsername","userAchievements","title","contactInfo","contactItem","profileMenu","menuItems","active","profileContent"],"sources":["C:/Users/player/Documents/GitHub/synask-app/src/pages/settings/ProfileSettings.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport ReactQuill from 'react-quill';\r\nimport 'react-quill/dist/quill.snow.css';\r\nimport getSupabaseClient from '../config/SupabaseClient';\r\nimport './ProfileSettings.css';\r\nimport p from '../Profile.module.css';\r\nimport load from '../Loader.module.css';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faEye, faSave, faTimes, faToggleOn, faToggleOff } from '@fortawesome/free-solid-svg-icons';\r\nimport AccentColorContext from './AccentColorContext';\r\nimport DOMPurify from 'dompurify';\r\nimport { faPhone, faBuilding, faGraduationCap, faEdit, faStar, faEnvelope, faUserPlus, faShare, faChevronDown, faInfoCircle, faImages, faLink } from '@fortawesome/free-solid-svg-icons';\r\n\r\nconst supabase = getSupabaseClient();\r\n\r\nconst ProfileSettings = () => {\r\n    const [tags, setTags] = useState([]);\r\n    const [subSection, setSubSection] = useState('about');\r\n    const [profile, setProfile] = useState(null);\r\n    const [editedProfile, setEditedProfile] = useState(null);\r\n    const [usernameAvailable, setUsernameAvailable] = useState(true);\r\n    const [phone, setPhone] = useState(editedProfile?.phone || '');\r\n    const [email, setEmail] = useState(editedProfile?.email || '');\r\n\r\n    const [isSaving, setIsSaving] = useState(false);\r\n    const [loading, setLoading] = useState(true);\r\n    const [showSaved, setShowSaved] = useState(true);\r\n    const [notification, setNotification] = useState('');\r\n    const [customStatus, setCustomStatus] = useState('');\r\n\r\n    const [isPreviewOpen, setIsPreviewOpen] = useState(false);\r\n    const [isSavedVersion, setIsSavedVersion] = useState(true);\r\n\r\n    const [image, setImage] = useState(null);\r\n    const [imageUrl, setImageUrl] = useState('');\r\n    const [charCount, setCharCount] = useState(editedProfile?.description.length || 0);\r\n    const [editorValue, setEditorValue] = useState(editedProfile?.description || '');\r\n\r\n    // Состояния и хуки для обработки предпросмотра изображений и обработки ошибок\r\n    const [avatarError, setAvatarError] = useState(false);\r\n    const [coverError, setCoverError] = useState(false);\r\n\r\n    // Сброс ошибок при изменении URL\r\n    useEffect(() => {\r\n        setAvatarError(false);\r\n    }, [editedProfile?.avatar_url]);\r\n\r\n    useEffect(() => {\r\n        setCoverError(false);\r\n    }, [editedProfile?.cover_url]);\r\n\r\n    // Валидация номера телефона и почты\r\n\r\n    const isValidPhoneNumber = (phone) => {\r\n      const phonePattern = /^\\+\\d{1,3} \\d{3} \\d{3}-\\d{2}-\\d{2}$/;\r\n      return phone ? phonePattern.test(phone) : true;\r\n    };\r\n\r\n    const isValidEmail = (email) => {\r\n      const emailPattern = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n      return email ? emailPattern.test(email) : true;\r\n    };\r\n\r\n    // Cостояние для отслеживания счетчиков символов и проверок\r\n    const [charCounts, setCharCounts] = useState({\r\n        avatar_url: 0,\r\n        cover_url: 0,\r\n        custom_status: 0,\r\n        first_name: 0,\r\n        last_name: 0,\r\n        username: 0,\r\n        work_infp: 0,\r\n        education_info: 0,\r\n        display_phone: 0,\r\n        display_email: 0\r\n    });\r\n    const [isFormValid, setIsFormValid] = useState(true);\r\n\r\n    useEffect(() => {\r\n        if (editedProfile) {\r\n            setCharCounts({\r\n                avatar_url: editedProfile.avatar_url?.length || 0,\r\n                cover_url: editedProfile.cover_url?.length || 0,\r\n                custom_status: editedProfile.status?.length || 0,\r\n                first_name: editedProfile.first_name?.length || 0,\r\n                last_name: editedProfile.last_name?.length || 0,\r\n                username: editedProfile.username?.length || 0,\r\n                work_info: editedProfile.work_info?.length || 0,\r\n                education_info: editedProfile.education_info?.length || 0,\r\n                display_phone: editedProfile.display_phone?.length || 0,\r\n                display_email: editedProfile.display_email?.length || 0\r\n            });\r\n            setCharCount(editedProfile.description.length || 0);\r\n        }\r\n    }, [editedProfile]);\r\n\r\n\r\n    useEffect(() => {\r\n        const fetchProfile = async () => {\r\n            try {\r\n                const { data: userData, error: userError } = await supabase.auth.getUser();\r\n                if (userError || !userData) {\r\n                    console.log('No active session found.');\r\n                    window.location.href = '/login';\r\n                    return;\r\n                }\r\n\r\n                let query = supabase\r\n                    .from('users_public_information')\r\n                    .select('*')\r\n                    .eq('auth_id', userData.user.id)\r\n                    .single();\r\n\r\n                const { data, error } = await query;\r\n                if (error) {\r\n                    throw error;\r\n                }\r\n\r\n                setProfile(data);\r\n                setEditorValue(data.description);\r\n                setEditedProfile(data);\r\n                setTags(JSON.parse(data.tags || '[]'));\r\n            } catch (error) {\r\n                console.error('Error fetching user information:', error.message);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchProfile();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        setUsernameAvailable('check');\r\n        const timer = setTimeout(() => {\r\n            if (editedProfile && editedProfile.username !== profile.username) {\r\n                checkUsernameAvailability(editedProfile.username);\r\n            } else if (editedProfile) {\r\n                setUsernameAvailable(null);\r\n            }\r\n        }, 3000);\r\n\r\n        return () => clearTimeout(timer);\r\n    }, [editedProfile?.username]);\r\n\r\n\r\n    const checkUsernameAvailability = async (username) => {\r\n        const { data, error } = await supabase\r\n            .from('users_public_information')\r\n            .select('id')\r\n            .eq('username', username)\r\n            .single();\r\n\r\n        setUsernameAvailable(!data);\r\n    };\r\n\r\n    const handleChange = (field, value) => {\r\n        const maxLengths = {\r\n            avatar_url: 200,\r\n            cover_url: 200,\r\n            custom_status: 30,\r\n            first_name: 20,\r\n            last_name: 20,\r\n            username: 20,\r\n            description: 1050,\r\n            work_info: 30,\r\n            education_info: 30,\r\n            display_phone: 18,\r\n            display_email: 30\r\n        };\r\n\r\n        //console.log(value.length, value);\r\n\r\n        if (field === 'status' && value !== 'custom') {\r\n            setCustomStatus(false);\r\n            setEditedProfile({\r\n                ...editedProfile,\r\n                status: value,\r\n            });\r\n        } else if (field === 'custom_status') {\r\n            setCustomStatus(value);\r\n            setEditedProfile({\r\n                ...editedProfile,\r\n                status: value,\r\n            });\r\n        } else {\r\n            setEditedProfile({\r\n                ...editedProfile,\r\n                [field]: value,\r\n            });\r\n        }\r\n\r\n        setCharCounts((prevCounts) => ({\r\n            ...prevCounts,\r\n            [field]: value.length\r\n        }));\r\n\r\n        const isFieldValid = value.length <= maxLengths[field];\r\n        setIsFormValid(isFieldValid);\r\n    };\r\n\r\n\r\n    const handleTagInput = (event) => {\r\n      if (event.key === 'Enter' && event.target.value.trim() && tags.length < 5) {\r\n        const newTag = event.target.value.trim();\r\n        if (newTag.length <= 15 && tags.join('').length + newTag.length <= 60) {\r\n          const newTags = [...tags, newTag];\r\n          setTags(newTags);\r\n          setEditedProfile({\r\n            ...editedProfile,\r\n            tags: JSON.stringify(newTags),\r\n          });\r\n          event.target.value = '';\r\n        }\r\n      }\r\n    };\r\n\r\n    const removeTag = (tagToRemove) => {\r\n      const updatedTags = tags.filter(tag => tag !== tagToRemove);\r\n      setTags(updatedTags);\r\n      setEditedProfile({\r\n        ...editedProfile,\r\n        tags: JSON.stringify(updatedTags),\r\n      });\r\n    };\r\n\r\n    const handleSave = async () => {\r\n        setIsSaving(true);\r\n        setNotification('');\r\n        const updatedProfile = {\r\n          ...editedProfile,\r\n          status: customStatus || editedProfile.status,\r\n          tags: JSON.stringify(tags),\r\n        };\r\n\r\n        const { data: userData, error: userError } = await supabase.auth.getUser();\r\n        if (userError || !userData) {\r\n            console.log('No active session found.');\r\n            window.location.href = '/login';\r\n            return;\r\n        }\r\n\r\n        const { data, error } = await supabase\r\n            .from('users_public_information')\r\n            .update(updatedProfile)\r\n            .eq('auth_id', userData.user.id);\r\n\r\n        if (error) {\r\n            setNotification('Ошибка сохранения данных в базу данных');\r\n            console.error('Error updating profile:', error.message);\r\n            return;\r\n        }\r\n\r\n        const { dataUpdate, errorUpdate} = await supabase.auth.updateUser({\r\n            data: {\r\n                firstName: updatedProfile.first_name,\r\n                lastName: updatedProfile.last_name,\r\n                nickname: updatedProfile.username,\r\n            }\r\n        })\r\n\r\n        if (errorUpdate) {\r\n            setNotification('Ошибка сохранения данных для пользователя');\r\n            console.error('Error updating profile:', error.message);\r\n        } else {\r\n            setProfile(updatedProfile);\r\n            setEditedProfile(updatedProfile);\r\n            setNotification('Данные успешно сохранены');\r\n            window.dispatchEvent(new Event('profileUpdated')); // Custom event for updating dependent components\r\n        }\r\n\r\n        setIsSaving(false);\r\n    };\r\n\r\n    const togglePreview = () => {\r\n        setIsPreviewOpen(!isPreviewOpen);\r\n    };\r\n\r\n    const handleVersionToggle = () => {\r\n        setIsSavedVersion(!isSavedVersion);\r\n    };\r\n\r\n    const closePreview = () => {\r\n        setIsPreviewOpen(false);\r\n    };\r\n\r\n    /*\r\n    const handleImageChange = (e) => {\r\n        const file = e.target.files[0];\r\n        if (file) {\r\n            setImageUrl(URL.createObjectURL(file));\r\n            setShowCropper(true);\r\n        }\r\n    };\r\n    */\r\n\r\n    const renderEditor = () => {\r\n\r\n        const imageHandler = () => {\r\n            const url = prompt('Введите URL изображения:');\r\n            if (url) {\r\n                const quill = this.quill;\r\n                const range = quill.getSelection();\r\n                quill.insertEmbed(range.index, 'image', url);\r\n            }\r\n        };\r\n\r\n        const handleTextChange = (content) => {\r\n            // Проверяем длину текста\r\n            setCharCount(content.length);\r\n            console.log(content.length, content);\r\n            setEditorValue(content);\r\n            handleChange('description', content);\r\n        };\r\n\r\n        return (\r\n            <div className=\"editor-container\">\r\n                <ReactQuill\r\n                    value={editorValue}\r\n                    data-gramm = 'true'\r\n                    onChange={handleTextChange}\r\n                    modules={{\r\n                        toolbar: {\r\n                            container: [\r\n                                [{ 'header': '1' }, { 'header': '2' }, { 'font': [] }],\r\n                                [{ 'list': 'ordered' }, { 'list': 'bullet' }],\r\n                                ['bold', 'italic', 'underline', 'blockquote'],\r\n                                [{ 'color': [] }, { 'background': [] }], // Цвет текста и фона\r\n                                ['link', 'blockquote'],\r\n                                [{ 'align': [] }],\r\n                                ['clean'],\r\n                            ]\r\n                        }\r\n                    }}\r\n                    placeholder=\"Введите текст здесь...\"\r\n                />\r\n                <span className={charCount > 1050 ? 'char-counter-error' : 'char-counter'}>\r\n                    {charCount} / 1050\r\n                </span>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    const renderSubSection = () => {\r\n        switch (subSection) {\r\n            case 'about':\r\n                return (\r\n                    <div>\r\n                        <h3>О себе</h3>\r\n                        <div className=\"setting-item\">\r\n                            <label>Статус:</label>\r\n                            <select\r\n                                value={editedProfile?.status === 'online' || editedProfile?.status === 'offline' ? editedProfile?.status : 'custom'}\r\n                                onChange={(e) => {\r\n                                    const value = e.target.value;\r\n                                    if (value === 'custom') {\r\n                                        handleChange('status', customStatus);\r\n                                    } else {\r\n                                        handleChange('status', value);\r\n                                    }\r\n                                }}\r\n                                className={profile.status !== editedProfile.status ? 'changed' : ''}\r\n                            >\r\n                                <option value=\"online\">Онлайн</option>\r\n                                <option value=\"offline\">Офлайн</option>\r\n                                <option value=\"custom\">Пользовательский статус</option>\r\n                            </select>\r\n                            {editedProfile?.status != 'online' && editedProfile?.status != 'offline' && (\r\n                                <>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={customStatus || editedProfile?.status || ''}\r\n                                        onChange={(e) => handleChange('custom_status', e.target.value)}\r\n                                        placeholder=\"Введите свой статус\"\r\n                                        className=\"custom-status-input\"\r\n                                        className={charCounts.custom_status > 30 ? 'input-error' : ''}\r\n                                    />\r\n                                    <span className={charCounts.custom_status > 30 ? 'char-counter-error' : 'char-counter'}>\r\n                                        {charCounts.custom_status} / 30\r\n                                    </span>\r\n                                    {editedProfile?.status === '' && (\r\n                                        <div className=\"message\">\r\n                                            Оставьте поле пустым, если хотите удалить статус\r\n                                        </div>\r\n                                    )}\r\n                                </>\r\n                            )}\r\n                        </div>\r\n                        <div className=\"setting-item\">\r\n                            <label>Аватар:</label>\r\n                            <input\r\n                                type=\"url\"\r\n                                value={editedProfile.avatar_url || ''}\r\n                                onChange={(e) => handleChange('avatar_url', e.target.value)}\r\n                                placeholder=\"Введите URL аватара\"\r\n                                className={charCounts.avatar_url > 200 ? 'input-error' : ''}\r\n                            />\r\n                            <span className={charCounts.avatar_url > 200 ? 'char-counter-error' : 'char-counter'}>\r\n                                {charCounts.avatar_url} / 200\r\n                            </span>\r\n                            {editedProfile?.avatar_url && (\r\n                                <div>\r\n                                    {avatarError ? (\r\n                                        <p style={{ color: 'red' }}>Не удалось загрузить изображение аватара</p>\r\n                                    ) : (\r\n                                        <img\r\n                                            src={editedProfile.avatar_url}\r\n                                            alt=\"Avatar Preview\"\r\n                                            onError={() => setAvatarError(true)}\r\n                                            style={{ cursor: 'pointer', width: '50px', height: '50px' }}\r\n                                        />\r\n                                    )}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        <div className=\"setting-item\">\r\n                            <label>Обложка:</label>\r\n                            <input\r\n                                type=\"url\"\r\n                                value={editedProfile.cover_url || ''}\r\n                                onChange={(e) => handleChange('cover_url', e.target.value)}\r\n                                placeholder=\"Введите URL обложки\"\r\n                                className={charCounts.cover_url > 200 ? 'input-error' : ''}\r\n                            />\r\n                            <span className={charCounts.cover_url > 200 ? 'char-counter-error' : 'char-counter'}>\r\n                                {charCounts.cover_url} / 200\r\n                            </span>\r\n                            {editedProfile?.cover_url && (\r\n                                <div>\r\n                                    {coverError ? (\r\n                                        <p style={{ color: 'red' }}>Не удалось загрузить изображение обложки</p>\r\n                                    ) : (\r\n                                        <img\r\n                                            src={editedProfile.cover_url}\r\n                                            alt=\"Cover Preview\"\r\n                                            onError={() => setCoverError(true)}\r\n                                            style={{ cursor: 'pointer', width: '50px', height: '50px' }}\r\n                                        />\r\n                                    )}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                        <div className=\"setting-item\">\r\n                            <label>Имя:</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                value={editedProfile?.first_name || ''}\r\n                                onChange={(e) => handleChange('first_name', e.target.value)}\r\n                                className={charCounts.first_name > 20 ? 'input-error' : ''}\r\n                            />\r\n                            <span className={charCounts.first_name > 20 ? 'char-counter-error' : 'char-counter'}>\r\n                                {charCounts.first_name} / 20\r\n                            </span>\r\n                        </div>\r\n                        <div className=\"setting-item\">\r\n                            <label>Фамилия:</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                value={editedProfile?.last_name || ''}\r\n                                onChange={(e) => handleChange('last_name', e.target.value)}\r\n                                className={charCounts.last_name > 20 ? 'input-error' : ''}\r\n                            />\r\n                            <span className={charCounts.last_name > 20 ? 'char-counter-error' : 'char-counter'}>\r\n                                {charCounts.last_name} / 20\r\n                            </span>\r\n                        </div>\r\n                        <div className=\"setting-item\">\r\n                            <label>Username:</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                value={editedProfile?.username || ''}\r\n                                onChange={(e) => handleChange('username', e.target.value)}\r\n                                className={charCounts.username > 20 ? 'input-error' : ''}\r\n                            />\r\n                            <span className={charCounts.username > 20 ? 'char-counter-error' : 'char-counter'}>\r\n                                {charCounts.username} / 20\r\n                            </span>\r\n                            {profile.username === editedProfile.username && (\r\n                                <div className=\"saved-username\">Этот ник уже стоит у пользователя</div>\r\n                            )}\r\n                            {usernameAvailable === 'check' && <span>Проверка...</span>}\r\n                            {usernameAvailable === true && <span style={{ color: 'green' }}>Этот ник свободен</span>}\r\n                            {usernameAvailable === false && <span style={{ color: 'red' }}>Этот ник занят</span>}\r\n                        </div>\r\n                        <div className=\"setting-item\">\r\n                            <label>Теги:</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder=\"Введите тег и нажмите Enter\"\r\n                                onKeyUp={handleTagInput}\r\n                            />\r\n                            <div className=\"tags\">\r\n                                {tags.map(tag => (\r\n                                    <div key={tag} className=\"tag\">\r\n                                        {tag}\r\n                                        <span onClick={() => removeTag(tag)}>x</span>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"setting-item\">\r\n                            <label>Номер телефона:</label>\r\n                            <input\r\n                              type=\"text\"\r\n                              value={editedProfile?.display_phone || ''}\r\n                              onChange={(e) => handleChange('display_phone', e.target.value)}\r\n                              placeholder=\"+X XXX XXX-XX-XX\"\r\n                              className={!isValidPhoneNumber(editedProfile?.display_phone) ? 'input-error' : ''}\r\n                            />\r\n                            {!isValidPhoneNumber(editedProfile?.display_phone) && <span style={{ color: 'red' }}>Неверный формат номера</span>}\r\n                            <span className={charCounts.display_phone > 18 ? 'char-counter-error' : 'char-counter'}>\r\n                                {charCounts.display_phone} / 18\r\n                            </span>\r\n                          </div>\r\n\r\n                          <div className=\"setting-item\">\r\n                            <label>Почта:</label>\r\n                            <input\r\n                              type=\"email\"\r\n                              value={editedProfile?.display_email || ''}\r\n                              onChange={(e) => handleChange('display_email', e.target.value)}\r\n                              placeholder=\"example@mail.com\"\r\n                              className={!isValidEmail(editedProfile?.display_email) ? 'input-error' : ''}\r\n                            />\r\n                            {!isValidEmail(editedProfile?.display_email) && <span style={{ color: 'red' }}>Неверный формат почты</span>}\r\n                            <span className={charCounts.display_email > 30 ? 'char-counter-error' : 'char-counter'}>\r\n                                {charCounts.display_email} / 30\r\n                            </span>\r\n                          </div>\r\n\r\n                          <div className=\"setting-item\">\r\n                            <label>Образовательное учреждение:</label>\r\n                            <input\r\n                              type=\"text\"\r\n                              value={editedProfile?.education_info || ''}\r\n                              onChange={(e) => handleChange('education_info', e.target.value)}\r\n                            />\r\n                            <span className={charCounts.education_info > 30 ? 'char-counter-error' : 'char-counter'}>\r\n                                {charCounts.education_info} / 30\r\n                            </span>\r\n                          </div>\r\n\r\n                          <div className=\"setting-item\">\r\n                            <label>Место работы:</label>\r\n                            <input\r\n                              type=\"text\"\r\n                              value={editedProfile?.work_info || ''}\r\n                              onChange={(e) => handleChange('work_info', e.target.value)}\r\n                            />\r\n                            <span className={charCounts.work_info > 30 ? 'char-counter-error' : 'char-counter'}>\r\n                                {charCounts.work_info} / 30\r\n                            </span>\r\n                          </div>\r\n                        <div>\r\n                            <h3>Описание профиля</h3>\r\n                            {renderEditor()}\r\n                        </div>\r\n                    </div>\r\n                );\r\n            case 'media':\r\n                return (\r\n                    <div>\r\n                        <h3>Медиа</h3>\r\n                        <div className=\"media-actions\">\r\n                            <button>Добавить фото/видео</button>\r\n                            <button>Выделить</button>\r\n                            <input type=\"text\" placeholder=\"Поиск по описанию\" />\r\n                            {/* другие действия */}\r\n                        </div>\r\n                        <div className=\"media-gallery\">\r\n                            {/* Галерея фото/видео */}\r\n                        </div>\r\n                    </div>\r\n                );\r\n            case 'music':\r\n                return (\r\n                    <div>\r\n                        <h3>Музыка</h3>\r\n                        <div className=\"music-actions\">\r\n                            <button>Добавить трек</button>\r\n                            <input type=\"text\" placeholder=\"Поиск по названию или артисту\"\r\n                            />\r\n                            {/* другие действия */}\r\n                        </div>\r\n                        <div className=\"music-list\">\r\n                            {/* Список треков */}\r\n                        </div>\r\n                    </div>\r\n                );\r\n            case 'verification':\r\n                return (\r\n                    <div>\r\n                        <h3>Верификация</h3>\r\n                        <div className=\"verification-service\">\r\n                            <img src=\"https://cubiq.ru/wp-content/uploads/2020/09/twitchprime.jpg\" className=\"service-icon\" />\r\n                            <div className=\"service-info\">\r\n                                <p>Никнейм: user123</p>\r\n                                <p>Фоловеры: 12,000</p>\r\n                                <p>Требования:</p>\r\n                                <ul>\r\n                                    <li>10,000 фоловеров <span>✔</span></li>\r\n                                    <li>Стримы каждую неделю <span>✔</span></li>\r\n                                    <li>Приемлемое количество просмотров <span>✔</span></li>\r\n                                </ul>\r\n                                <p>Вы медийная личность <span>✔</span></p>\r\n                            </div>\r\n                        </div>\r\n                        <button>Подключить новый сервис</button>\r\n                    </div>\r\n                );\r\n            default:\r\n                return <div>О себе</div>;\r\n        }\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className={load.spinner}>\r\n                <div></div>\r\n                <div></div>\r\n                <div></div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {/* Основной контент настроек профиля */}\r\n            {isPreviewOpen ? (\r\n                <div className=\"modal-background\" onClick={closePreview}>\r\n                    <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\r\n                        <div className=\"modal-header\">\r\n                            <button onClick={handleVersionToggle} className=\"toggle-version-button\">\r\n                                <FontAwesomeIcon icon={isSavedVersion ? faToggleOn : faToggleOff} />\r\n                                {isSavedVersion ? 'Сохранённая версия' : 'Изменённая версия'}\r\n                            </button>\r\n                            <button onClick={closePreview} className=\"close-button\">\r\n                                <FontAwesomeIcon icon={faTimes} /> Вернуться\r\n                            </button>\r\n                        </div>\r\n                        <div className=\"profile-preview\">\r\n                            <ProfileComponent profile={isSavedVersion ? profile : editedProfile} tags={tags} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            ) : (\r\n                <div>\r\n                    <h2>Мой профиль</h2>\r\n                    {JSON.stringify(profile) !== JSON.stringify(editedProfile) && (\r\n                        <div className=\"profile-buttons\">\r\n                            {notification && <div className=\"notification\">{notification}</div>}\r\n                            <button className=\"save-button\" onClick={handleSave} disabled={isSaving || !isFormValid || !isValidPhoneNumber(editedProfile?.display_phone) || !isValidEmail(editedProfile?.display_email)}>\r\n                                <FontAwesomeIcon icon={faSave} /> Сохранить\r\n                            </button>\r\n                            <button className=\"preview-button\" onClick={togglePreview}>\r\n                                <FontAwesomeIcon icon={faEye} /> Предпросмотр\r\n                            </button>\r\n                        </div>\r\n                    )}\r\n                    <div className=\"profile-submenu\">\r\n                        <span className={subSection === 'about' ? 'active' : ''} onClick={() => setSubSection('about')}>О себе</span>\r\n                        <span className={subSection === 'media' ? 'active' : ''} onClick={() => setSubSection('media')}>Медиа</span>\r\n                        <span className={subSection === 'music' ? 'active' : ''} onClick={() => setSubSection('music')}>Музыка</span>\r\n                        <span className={subSection === 'verification' ? 'active' : ''} onClick={() => setSubSection('verification')}>Верификация</span>\r\n                    </div>\r\n                    <div className=\"profile-settings-content\">\r\n                        {renderSubSection()}\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst ProfileComponent = ({ profile, tags }) => {\r\n    const [activeSection, setActiveSection] = useState('description');\r\n    const { accentColor } = useContext(AccentColorContext);\r\n\r\n    const ProfileDescription = ({ description }) => {\r\n      // Очистка HTML перед рендером\r\n      const sanitizedDescription = DOMPurify.sanitize(description);\r\n\r\n      return (\r\n        <div className=\"ql-editor\" data-gramm=\"false\" dangerouslySetInnerHTML={{ __html: sanitizedDescription }} />\r\n      );\r\n    };\r\n\r\n    const renderStatus = (status) => {\r\n        if (status === 'online') {\r\n            return <div className={p.statusIndicator} data-status={status} style={{ backgroundColor: 'green' }} />;\r\n        } else if (status === 'offline') {\r\n            return <div className={p.statusIndicator} data-status={status} style={{ backgroundColor: 'gray' }} />;\r\n        } else if (status) {\r\n            const [symbol, userStatus] = status.split(':');\r\n            if (userStatus && symbol.length < 4) {\r\n                return (\r\n                    <div className={p.customStatusIndicator} data-status={userStatus}>\r\n                        {symbol}\r\n                    </div>\r\n                );\r\n            }\r\n            return (\r\n                <div className={p.customStatusIndicator} data-status={status}>\r\n                    💬\r\n                </div>\r\n            );\r\n        } else {\r\n            return;\r\n        }\r\n    };\r\n\r\n    const renderSection = () => {\r\n        switch (activeSection) {\r\n            case 'description':\r\n                return <ProfileDescription description={profile.description} />;\r\n            case 'media':\r\n                return <div>Медиа контент...</div>;\r\n            case 'links':\r\n                return <div>Ссылки...</div>;\r\n            default:\r\n                return <ProfileDescription description={profile.description} />;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className={p.container}>\r\n            <div className={p.profileBlock} style={{ borderColor: accentColor }}>\r\n                <div className={p.profileHeader}>\r\n                    <div className={p.profileCover}>\r\n                        <img id=\"profile-cover\" src={profile.cover_url} alt=\"Cover Photo\" />\r\n                    </div>\r\n                    <div className={p.profileAvatar}>\r\n                        <img id=\"profile-avatar\" src={profile.avatar_url} alt=\"User Photo\" />\r\n                        {renderStatus(profile.status)}\r\n                    </div>\r\n                    <div className={p.profileTags}>\r\n                        {tags.map(tag => <span key={tag} className={p.tag}>{tag}</span>)}\r\n                    </div>\r\n                </div>\r\n                <div className={p.profileInfo} style={{ borderColor: accentColor }}>\r\n                    <h2 className={p.profileNames}>{`${profile.first_name} ${profile.last_name}`}</h2>\r\n                    <div className={p.profileUsername}>@{profile.username}</div>\r\n                    <div className={p.userAchievements}>\r\n                        <FontAwesomeIcon icon={faStar} title=\"Подтверждённый аккаунт\" style={{ color: 'gold' }} />\r\n                        <FontAwesomeIcon icon={faStar} title=\"Значок твича\" style={{ color: 'purple' }} />\r\n                        <FontAwesomeIcon icon={faStar} title=\"Значок тестировщика\" style={{ color: 'green' }} />\r\n                        <FontAwesomeIcon icon={faStar} title=\"Значок олда\" style={{ color: 'blue' }} />\r\n                    </div>\r\n                </div>\r\n                <div className={p.contactInfo}>\r\n                    <div>\r\n                        {profile.display_email && (\r\n                            <div className={p.contactItem}>\r\n                                <FontAwesomeIcon icon={faEnvelope} /> {profile.display_email}\r\n                            </div>\r\n                        )}\r\n                        {profile.display_phone && (\r\n                            <div className={p.contactItem}>\r\n                                <FontAwesomeIcon icon={faPhone} /> {profile.display_phone}\r\n                            </div>\r\n                        )}\r\n                        {profile.work_info && (\r\n                            <div className={p.contactItem}>\r\n                                <FontAwesomeIcon icon={faBuilding} /> {profile.work_info}\r\n                            </div>\r\n                        )}\r\n                        {profile.education_info && (\r\n                            <div className={p.contactItem}>\r\n                                <FontAwesomeIcon icon={faGraduationCap} /> {profile.education_info}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n                <div className={p.profileMenu}>\r\n                    <div className={`${p.menuItems} ${activeSection === 'description' ? p.active : ''}`} onClick={() => setActiveSection('description')}>\r\n                        <FontAwesomeIcon icon={faInfoCircle} /> Описание\r\n                    </div>\r\n                    <div className={`${p.menuItems} ${activeSection === 'media' ? p.active : ''}`} onClick={() => setActiveSection('media')}>\r\n                        <FontAwesomeIcon icon={faImages} /> Медиа\r\n                    </div>\r\n                    <div className={`${p.menuItems} ${activeSection === 'links' ? p.active : ''}`} onClick={() => setActiveSection('links')}>\r\n                        <FontAwesomeIcon icon={faLink} /> Ссылки\r\n                    </div>\r\n                </div>\r\n                <div className={p.profileContent}>\r\n                    {renderSection()}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ProfileSettings;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}