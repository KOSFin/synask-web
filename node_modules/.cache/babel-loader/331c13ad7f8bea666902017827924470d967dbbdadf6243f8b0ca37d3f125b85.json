{"ast":null,"code":"import React,{useEffect,useState}from'react';import{createClient}from'@supabase/supabase-js';import styles from'./AccountSetupPage.module.css';import l from'./Loader.module.css';import getSupabaseClient from'./config/SupabaseClient';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const supabase=getSupabaseClient();const AccountSetupPage=()=>{const[error,setError]=useState(null);const[loading,setLoading]=useState(true);const[username,setUsername]=useState('');const[usernameAvailable,setUsernameAvailable]=useState('check');const[formData,setFormData]=useState({firstName:'',lastName:''});const handleChange=(field,value)=>{setFormData(prevState=>({...prevState,[field]:value}));};const handleUsernameChange=e=>{const value=e.target.value.replace(/[^a-zA-Z0-9а-яА-Я]/g,'');setUsername(value);setUsernameAvailable('check');};const checkUsernameAvailability=async username=>{const{data,error}=await supabase.from('users_public_information').select('id').eq('username',username).single();if(error&&error.code!=='PGRST116'){setError(\"Error checking username: \".concat(error.message));}else{setUsernameAvailable(!data);}};useEffect(()=>{if(username){const timer=setTimeout(()=>{checkUsernameAvailability(username);},300);return()=>clearTimeout(timer);}},[username]);const setupAccount=async()=>{setLoading(true);try{const{data:{user},error:userError}=await supabase.auth.getUser();if(userError)throw userError;if(user){let{data:publicData,error:publicError}=await supabase.from('users_public_information').select('*').eq('auth_id',user.id).single();if(publicError&&publicError.code!=='PGRST116')throw publicError;const genderValue=parseInt(user.user_metadata.gender);if(!publicData){const updates={auth_id:user.id,username:username||'',first_name:formData.firstName||user.user_metadata.firstName||'',last_name:formData.lastName||user.user_metadata.lastName||'',gender:genderValue,created_at:user.created_at};const updatesPv={auth_id:user.id,email:user.email,phone:user.phone||''};if(Object.values(updates).some(value=>value==='')){setLoading(false);return;}if(usernameAvailable!==true){setError('Username is not available. Please choose another one.');setLoading(false);return;}let{error:upsertPubError}=await supabase.from('users_public_information').upsert(updates,{onConflict:['auth_id']});if(upsertPubError)throw upsertPubError;let{error:upsertPvError}=await supabase.from('users_private_information').upsert(updatesPv,{onConflict:['auth_id']});if(upsertPvError)throw upsertPvError;}const updatedProfile={first_name:formData.firstName||user.user_metadata.firstName||'',last_name:formData.lastName||user.user_metadata.lastName||'',username:username||''};const{dataUpdate,errorUpdate}=await supabase.auth.updateUser({data:{firstName:formData.firstName||user.user_metadata.firstName||'',lastName:formData.lastName||user.user_metadata.lastName||'',nickname:username||''}});if(errorUpdate)throw errorUpdate;window.location.href='/';}else{window.location.href='/login.html';}}catch(err){setError(\"Error: \".concat(err.message));setLoading(false);}};useEffect(()=>{const fetchUser=async()=>{setLoading(true);const{data:{user},error:userError}=await supabase.auth.getUser();if(userError){setError(\"Error fetching user: \".concat(userError.message));setLoading(false);return;}if(user){setFormData({firstName:user.user_metadata.firstName||'',lastName:user.user_metadata.lastName||''});setLoading(false);}else{window.location.href='/login.html';}};fetchUser();},[]);if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:l.spinner,children:[/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{})]});}return/*#__PURE__*/_jsxs(\"div\",{className:styles.accountSetupPage,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0417\\u0430\\u0432\\u0435\\u0440\\u0448\\u0435\\u043D\\u0438\\u0435 \\u0421\\u043E\\u0437\\u0434\\u0430\\u043D\\u0438\\u044F \\u0410\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\\u0430\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u042D\\u0442\\u0430 \\u0441\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u0430 \\u0437\\u0430\\u0432\\u0435\\u0440\\u0448\\u0430\\u0435\\u0442 \\u0441\\u043E\\u0437\\u0434\\u0430\\u043D\\u0438\\u0435 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\\u0430 \\u0438 \\u0434\\u0430\\u0435\\u0442 \\u0432\\u0430\\u043C \\u043F\\u0443\\u0431\\u043B\\u0438\\u0447\\u043D\\u0443\\u044E \\u0441\\u0441\\u044B\\u043B\\u043A\\u0443.\"}),error?/*#__PURE__*/_jsx(\"div\",{className:styles.error,children:error}):/*#__PURE__*/_jsxs(\"form\",{className:styles.form,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.settingItem,children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u041D\\u0438\\u043A:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:username,onChange:handleUsernameChange,className:\"\".concat(styles.input,\" \").concat(usernameAvailable===false?styles.errorInput:formData.username!==username?styles.changedInput:'')}),formData.username===username&&/*#__PURE__*/_jsx(\"div\",{className:styles.savedUsername,children:\"\\u042D\\u0442\\u043E\\u0442 \\u043D\\u0438\\u043A \\u0443\\u0436\\u0435 \\u0441\\u0442\\u043E\\u0438\\u0442 \\u0443 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\"}),usernameAvailable==='check'&&/*#__PURE__*/_jsx(\"span\",{children:\"\\u041F\\u0440\\u043E\\u0432\\u0435\\u0440\\u043A\\u0430...\"}),usernameAvailable===true&&/*#__PURE__*/_jsx(\"span\",{style:{color:'green'},children:\"\\u042D\\u0442\\u043E\\u0442 \\u043D\\u0438\\u043A \\u0441\\u0432\\u043E\\u0431\\u043E\\u0434\\u0435\\u043D\"}),usernameAvailable===false&&/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\"\\u042D\\u0442\\u043E\\u0442 \\u043D\\u0438\\u043A \\u0437\\u0430\\u043D\\u044F\\u0442\"})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.inputContainer,children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"firstName\",name:\"firstName\",placeholder:\"\\u0418\\u043C\\u044F\",value:formData.firstName,onChange:e=>handleChange('firstName',e.target.value),required:true,className:styles.input})}),/*#__PURE__*/_jsx(\"div\",{className:styles.inputContainer,children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"lastName\",name:\"lastName\",placeholder:\"\\u0424\\u0430\\u043C\\u0438\\u043B\\u0438\\u044F\",value:formData.lastName,onChange:e=>handleChange('lastName',e.target.value),required:true,className:styles.input})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:setupAccount,className:styles.button,children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"})]})]});};export default AccountSetupPage;","map":{"version":3,"names":["React","useEffect","useState","createClient","styles","l","getSupabaseClient","jsx","_jsx","jsxs","_jsxs","supabase","AccountSetupPage","error","setError","loading","setLoading","username","setUsername","usernameAvailable","setUsernameAvailable","formData","setFormData","firstName","lastName","handleChange","field","value","prevState","handleUsernameChange","e","target","replace","checkUsernameAvailability","data","from","select","eq","single","code","concat","message","timer","setTimeout","clearTimeout","setupAccount","user","userError","auth","getUser","publicData","publicError","id","genderValue","parseInt","user_metadata","gender","updates","auth_id","first_name","last_name","created_at","updatesPv","email","phone","Object","values","some","upsertPubError","upsert","onConflict","upsertPvError","updatedProfile","dataUpdate","errorUpdate","updateUser","nickname","window","location","href","err","fetchUser","className","spinner","children","accountSetupPage","form","settingItem","type","onChange","input","errorInput","changedInput","savedUsername","style","color","inputContainer","name","placeholder","required","onClick","button"],"sources":["C:/Users/player/Documents/GitHub/synask-app/src/pages/Check.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { createClient } from '@supabase/supabase-js';\r\nimport styles from './AccountSetupPage.module.css';\r\nimport l from './Loader.module.css';\r\nimport getSupabaseClient from './config/SupabaseClient';\r\n\r\nconst supabase = getSupabaseClient();\r\n\r\nconst AccountSetupPage = () => {\r\n  const [error, setError] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [username, setUsername] = useState('');\r\n  const [usernameAvailable, setUsernameAvailable] = useState('check');\r\n  const [formData, setFormData] = useState({\r\n    firstName: '',\r\n    lastName: '',\r\n  });\r\n\r\n  const handleChange = (field, value) => {\r\n    setFormData(prevState => ({ ...prevState, [field]: value }));\r\n  };\r\n\r\n  const handleUsernameChange = (e) => {\r\n    const value = e.target.value.replace(/[^a-zA-Z0-9а-яА-Я]/g, '');\r\n    setUsername(value);\r\n    setUsernameAvailable('check');\r\n  };\r\n\r\n  const checkUsernameAvailability = async (username) => {\r\n    const { data, error } = await supabase\r\n      .from('users_public_information')\r\n      .select('id')\r\n      .eq('username', username)\r\n      .single();\r\n\r\n    if (error && error.code !== 'PGRST116') {\r\n      setError(`Error checking username: ${error.message}`);\r\n    } else {\r\n      setUsernameAvailable(!data);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (username) {\r\n      const timer = setTimeout(() => {\r\n        checkUsernameAvailability(username);\r\n      }, 300);\r\n\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [username]);\r\n\r\n  const setupAccount = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const { data: { user }, error: userError } = await supabase.auth.getUser();\r\n\r\n      if (userError) throw userError;\r\n\r\n      if (user) {\r\n        let { data: publicData, error: publicError } = await supabase\r\n          .from('users_public_information')\r\n          .select('*')\r\n          .eq('auth_id', user.id)\r\n          .single();\r\n\r\n        if (publicError && publicError.code !== 'PGRST116') throw publicError;\r\n\r\n        const genderValue = parseInt(user.user_metadata.gender);\r\n\r\n        if (!publicData) {\r\n          const updates = {\r\n            auth_id: user.id,\r\n            username: username || '',\r\n            first_name: formData.firstName || user.user_metadata.firstName || '',\r\n            last_name: formData.lastName || user.user_metadata.lastName || '',\r\n            gender: genderValue,\r\n            created_at: user.created_at,\r\n          };\r\n\r\n          const updatesPv = {\r\n            auth_id: user.id,\r\n            email: user.email,\r\n            phone: user.phone || '',\r\n          };\r\n\r\n          if (Object.values(updates).some(value => value === '')) {\r\n            setLoading(false);\r\n            return;\r\n          }\r\n\r\n          if (usernameAvailable !== true) {\r\n            setError('Username is not available. Please choose another one.');\r\n            setLoading(false);\r\n            return;\r\n          }\r\n\r\n          let { error: upsertPubError } = await supabase\r\n            .from('users_public_information')\r\n            .upsert(updates, { onConflict: ['auth_id'] });\r\n\r\n          if (upsertPubError) throw upsertPubError;\r\n\r\n          let { error: upsertPvError } = await supabase\r\n            .from('users_private_information')\r\n            .upsert(updatesPv, { onConflict: ['auth_id'] });\r\n\r\n          if (upsertPvError) throw upsertPvError;\r\n        }\r\n\r\n        const updatedProfile = {\r\n          first_name: formData.firstName || user.user_metadata.firstName || '',\r\n          last_name: formData.lastName || user.user_metadata.lastName || '',\r\n          username: username || '',\r\n        };\r\n\r\n        const { dataUpdate, errorUpdate } = await supabase.auth.updateUser({\r\n          data: {\r\n            firstName: formData.firstName || user.user_metadata.firstName || '',\r\n            lastName: formData.lastName || user.user_metadata.lastName || '',\r\n            nickname: username || '',\r\n          }\r\n        });\r\n\r\n        if (errorUpdate) throw errorUpdate;\r\n\r\n        window.location.href = '/';\r\n      } else {\r\n        window.location.href = '/login.html';\r\n      }\r\n    } catch (err) {\r\n      setError(`Error: ${err.message}`);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchUser = async () => {\r\n      setLoading(true);\r\n      const { data: { user }, error: userError } = await supabase.auth.getUser();\r\n\r\n      if (userError) {\r\n        setError(`Error fetching user: ${userError.message}`);\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      if (user) {\r\n        setFormData({\r\n          firstName: user.user_metadata.firstName || '',\r\n          lastName: user.user_metadata.lastName || '',\r\n        });\r\n        setLoading(false);\r\n      } else {\r\n        window.location.href = '/login.html';\r\n      }\r\n    };\r\n\r\n    fetchUser();\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className={l.spinner}>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={styles.accountSetupPage}>\r\n      <h1>Завершение Создания Аккаунта</h1>\r\n      <p>Эта страница завершает создание аккаунта и дает вам публичную ссылку.</p>\r\n      {error ? (\r\n        <div className={styles.error}>{error}</div>\r\n      ) : (\r\n        <form className={styles.form}>\r\n          <div className={styles.settingItem}>\r\n            <label>Ник:</label>\r\n            <input\r\n              type=\"text\"\r\n              value={username}\r\n              onChange={handleUsernameChange}\r\n              className={`${styles.input} ${usernameAvailable === false ? styles.errorInput : (formData.username !== username ? styles.changedInput : '')}`}\r\n            />\r\n            {formData.username === username && (\r\n              <div className={styles.savedUsername}>Этот ник уже стоит у пользователя</div>\r\n            )}\r\n            {usernameAvailable === 'check' && <span>Проверка...</span>}\r\n            {usernameAvailable === true && <span style={{ color: 'green' }}>Этот ник свободен</span>}\r\n            {usernameAvailable === false && <span style={{ color: 'red' }}>Этот ник занят</span>}\r\n          </div>\r\n          <div className={styles.inputContainer}>\r\n            <input\r\n              type=\"text\"\r\n              id=\"firstName\"\r\n              name=\"firstName\"\r\n              placeholder=\"Имя\"\r\n              value={formData.firstName}\r\n              onChange={(e) => handleChange('firstName', e.target.value)}\r\n              required\r\n              className={styles.input}\r\n            />\r\n          </div>\r\n          <div className={styles.inputContainer}>\r\n            <input\r\n              type=\"text\"\r\n              id=\"lastName\"\r\n              name=\"lastName\"\r\n              placeholder=\"Фамилия\"\r\n              value={formData.lastName}\r\n              onChange={(e) => handleChange('lastName', e.target.value)}\r\n              required\r\n              className={styles.input}\r\n            />\r\n          </div>\r\n          <button type=\"button\" onClick={setupAccount} className={styles.button}>Сохранить</button>\r\n        </form>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AccountSetupPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}