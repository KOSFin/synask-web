{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams}from'react-router-dom';import styles from'./OrganizationView.module.css';import load from'../../../pages/Loader.module.css';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faSearch,faEllipsisV,faTimes}from'@fortawesome/free-solid-svg-icons';import ReactQuill from'react-quill';import DOMPurify from'dompurify';import getSupabaseClient from'../../config/SupabaseClient';import moment from'moment-timezone';// Для форматирования даты\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const supabase=getSupabaseClient();const OrganizationView=()=>{const{OrgName}=useParams();const[organization,setOrganization]=useState(null);const[posts,setPosts]=useState([]);const[searchVisible,setSearchVisible]=useState(false);const[staff,setStaff]=useState([]);const[loading,setLoading]=useState(true);const[isSubscribed,setIsSubscribed]=useState(false);const[userId,setUserId]=useState(null);useEffect(()=>{const fetchOrganizationData=async()=>{setLoading(true);const{data:authData,error:authError}=await supabase.auth.getUser();if(authError)throw authError;const currentUserId=authData.user.id;setUserId(currentUserId);const{data:organizationData,error:orgError}=await supabase.from('organizations').select('*').eq('name',OrgName).single();if(orgError)console.error('Error fetching organization:',orgError);const{data:postsData,error:postsError}=await supabase.from('posts').select('*').eq('organization_id',organizationData.id).order('created_at',{ascending:false});if(postsError)console.error('Error fetching posts:',postsError);if(organizationData){const roles=Object.keys(organizationData.roles);console.log(roles);const{data:usersData,error:usersError}=await supabase.from('users_public_information').select('auth_id, avatar_url, first_name, last_name').in('auth_id',roles);if(usersError)console.error('Error fetching users:',usersError);if(organizationData){setOrganization(organizationData);// Определяем, подписан ли пользователь на эту организацию\nsetIsSubscribed(organizationData.followers.includes(currentUserId));// Предположим, userId определен где-то в коде\n}if(usersData){setStaff(usersData);}if(postsData){setPosts(postsData);}}setLoading(false);};fetchOrganizationData();},[OrgName]);const toggleSubscription=async(organizationId,isSubscribed)=>{if(!userId){console.error('userId не определен');return;}const organizationData=organization;// Используем состояние\nif(!organization){console.error('Организация не найдена:',organizationId);return;}try{let updatedFollowers;if(isSubscribed){updatedFollowers=organizationData.followers.filter(id=>id!==userId);}else{updatedFollowers=[...organizationData.followers,userId];}const{error}=await supabase.from('organizations').update({followers:updatedFollowers}).eq('id',organizationId);if(error)throw error;setOrganization(prevOrg=>({...prevOrg,followers:updatedFollowers}));setIsSubscribed(!isSubscribed);}catch(error){console.error('Ошибка при обновлении подписки:',error.message);}};const toggleSearch=()=>setSearchVisible(!searchVisible);const formatDate=date=>{const userTimezone=moment.tz.guess();return moment(date).tz(userTimezone).format('LLL');};const renderMedia=media=>{if(!media)return null;const mediaObject=JSON.parse(media);const mediaElements=Object.values(mediaObject.media).map((item,index)=>{if(item.type==='video'){return/*#__PURE__*/_jsxs(\"video\",{controls:true,children:[/*#__PURE__*/_jsx(\"source\",{src:item.link,type:\"video/mp4\"}),\"Your browser does not support the video tag.\"]},index);}else if(item.type==='image'){return/*#__PURE__*/_jsx(\"img\",{src:item.link,alt:\"Post media\"},index);}return null;});return/*#__PURE__*/_jsx(\"div\",{className:\"media-\".concat(mediaObject.type),children:mediaElements});};return/*#__PURE__*/_jsx(\"div\",{className:styles.container,children:loading?/*#__PURE__*/_jsxs(\"div\",{className:load.spinner,children:[/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{})]}):/*#__PURE__*/_jsxs(\"div\",{className:styles.content,children:[/*#__PURE__*/_jsxs(\"aside\",{className:styles.sidebar,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.subscriptionBlock,children:/*#__PURE__*/_jsx(\"button\",{className:isSubscribed?styles.unsubscribeButton:styles.subscribeButton,onClick:()=>toggleSubscription(organization.id,isSubscribed),children:isSubscribed?'Отписаться':'Подписаться'})}),/*#__PURE__*/_jsx(\"div\",{className:styles.avatarBlock,children:/*#__PURE__*/_jsx(\"img\",{src:organization.avatar_url,alt:\"Organization Avatar\",className:styles.avatar})}),/*#__PURE__*/_jsxs(\"div\",{className:styles.details,children:[/*#__PURE__*/_jsx(\"h3\",{className:styles.title,children:organization.name}),/*#__PURE__*/_jsx(\"p\",{className:styles.subtitle,children:\"\\u0422\\u0435\\u043C\\u0430\\u0442\\u0438\\u043A\\u0430\"}),/*#__PURE__*/_jsx(\"p\",{children:organization.topic}),/*#__PURE__*/_jsx(\"p\",{className:styles.subtitle,children:\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"p\",{className:styles.description,children:organization.description.length>150?\"\".concat(organization.description.substring(0,150),\"...\"):organization.description}),/*#__PURE__*/_jsx(\"p\",{className:styles.subtitle,children:\"\\u041F\\u0435\\u0440\\u0441\\u043E\\u043D\\u0430\\u043B\"}),/*#__PURE__*/_jsx(\"div\",{className:styles.staff,children:staff.map(user=>/*#__PURE__*/_jsxs(\"div\",{className:styles.staffMember,children:[/*#__PURE__*/_jsx(\"img\",{src:user.avatar_url,alt:\"Staff Avatar\",className:styles.staffAvatar}),/*#__PURE__*/_jsxs(\"p\",{children:[user.first_name,\" \",user.last_name]})]},user.auth_id))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.postsBlock,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.header,children:searchVisible?/*#__PURE__*/_jsxs(\"div\",{className:styles.searchContainer,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:styles.searchInput,placeholder:\"\\u041F\\u043E\\u0438\\u0441\\u043A...\"}),/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faTimes,className:styles.searchIcon,onClick:toggleSearch})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faSearch,className:styles.icon,onClick:toggleSearch}),/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faEllipsisV,className:styles.icon})]})}),/*#__PURE__*/_jsx(\"div\",{className:styles.posts,children:posts.map(post=>/*#__PURE__*/_jsxs(\"div\",{className:styles.post,children:[/*#__PURE__*/_jsx(ProfileDescription,{description:post.content}),/*#__PURE__*/_jsx(\"div\",{className:styles.postDate,title:moment(post.created_at).format('LLLL'),children:formatDate(post.created_at)}),renderMedia(post.media)]},post.id))})]})]})});};// Компонент для рендеринга описания с безопасным HTML\nconst ProfileDescription=_ref=>{let{description}=_ref;const sanitizedDescription=DOMPurify.sanitize(description);return/*#__PURE__*/_jsx(\"div\",{className:\"ql-editor\",\"data-gramm\":\"false\",dangerouslySetInnerHTML:{__html:sanitizedDescription}});};export default OrganizationView;","map":{"version":3,"names":["React","useState","useEffect","useParams","styles","load","FontAwesomeIcon","faSearch","faEllipsisV","faTimes","ReactQuill","DOMPurify","getSupabaseClient","moment","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","supabase","OrganizationView","OrgName","organization","setOrganization","posts","setPosts","searchVisible","setSearchVisible","staff","setStaff","loading","setLoading","isSubscribed","setIsSubscribed","userId","setUserId","fetchOrganizationData","data","authData","error","authError","auth","getUser","currentUserId","user","id","organizationData","orgError","from","select","eq","single","console","postsData","postsError","order","ascending","roles","Object","keys","log","usersData","usersError","in","followers","includes","toggleSubscription","organizationId","updatedFollowers","filter","update","prevOrg","message","toggleSearch","formatDate","date","userTimezone","tz","guess","format","renderMedia","media","mediaObject","JSON","parse","mediaElements","values","map","item","index","type","controls","children","src","link","alt","className","concat","container","spinner","content","sidebar","subscriptionBlock","unsubscribeButton","subscribeButton","onClick","avatarBlock","avatar_url","avatar","details","title","name","subtitle","topic","description","length","substring","staffMember","staffAvatar","first_name","last_name","auth_id","postsBlock","header","searchContainer","searchInput","placeholder","icon","searchIcon","post","ProfileDescription","postDate","created_at","_ref","sanitizedDescription","sanitize","dangerouslySetInnerHTML","__html"],"sources":["C:/Users/player/Documents/GitHub/synask-app/src/pages/Organizations/OrganizationView/OrganizationView.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport styles from './OrganizationView.module.css';\r\nimport load from '../../../pages/Loader.module.css';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faSearch, faEllipsisV, faTimes } from '@fortawesome/free-solid-svg-icons';\r\nimport ReactQuill from 'react-quill';\r\nimport DOMPurify from 'dompurify';\r\nimport getSupabaseClient from '../../config/SupabaseClient';\r\nimport moment from 'moment-timezone'; // Для форматирования даты\r\n\r\nconst supabase = getSupabaseClient();\r\n\r\nconst OrganizationView = () => {\r\n  const { OrgName } = useParams();\r\n  const [organization, setOrganization] = useState(null);\r\n  const [posts, setPosts] = useState([]);\r\n  const [searchVisible, setSearchVisible] = useState(false);\r\n  const [staff, setStaff] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [isSubscribed, setIsSubscribed] = useState(false);\r\n  const [userId, setUserId] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchOrganizationData = async () => {\r\n      setLoading(true);\r\n\r\n      const { data: authData, error: authError } = await supabase.auth.getUser();\r\n      if (authError) throw authError;\r\n\r\n      const currentUserId = authData.user.id;\r\n      setUserId(currentUserId);\r\n\r\n      const { data: organizationData, error: orgError } = await supabase\r\n        .from('organizations')\r\n        .select('*')\r\n        .eq('name', OrgName)\r\n        .single();\r\n\r\n      if (orgError) console.error('Error fetching organization:', orgError);\r\n\r\n      const { data: postsData, error: postsError } = await supabase\r\n        .from('posts')\r\n        .select('*')\r\n        .eq('organization_id', organizationData.id)\r\n        .order('created_at', { ascending: false });\r\n\r\n      if (postsError) console.error('Error fetching posts:', postsError);\r\n\r\n      if (organizationData) {\r\n        const roles = Object.keys(organizationData.roles);\r\n        console.log(roles);\r\n        const { data: usersData, error: usersError } = await supabase\r\n          .from('users_public_information')\r\n          .select('auth_id, avatar_url, first_name, last_name')\r\n          .in('auth_id', roles);\r\n\r\n        if (usersError) console.error('Error fetching users:', usersError);\r\n\r\n        if (organizationData) {\r\n          setOrganization(organizationData);\r\n          // Определяем, подписан ли пользователь на эту организацию\r\n          setIsSubscribed(organizationData.followers.includes(currentUserId)); // Предположим, userId определен где-то в коде\r\n        }\r\n        if (usersData) {\r\n          setStaff(usersData);\r\n        }\r\n        if (postsData) {\r\n          setPosts(postsData);\r\n        }\r\n      }\r\n\r\n      setLoading(false);\r\n    };\r\n\r\n    fetchOrganizationData();\r\n  }, [OrgName]);\r\n\r\n  const toggleSubscription = async (organizationId, isSubscribed) => {\r\n    if (!userId) {\r\n      console.error('userId не определен');\r\n      return;\r\n    }\r\n\r\n    const organizationData = organization; // Используем состояние\r\n    if (!organization) {\r\n      console.error('Организация не найдена:', organizationId);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      let updatedFollowers;\r\n      if (isSubscribed) {\r\n        updatedFollowers = organizationData.followers.filter((id) => id !== userId);\r\n      } else {\r\n        updatedFollowers = [...organizationData.followers, userId];\r\n      }\r\n\r\n      const { error } = await supabase\r\n        .from('organizations')\r\n        .update({ followers: updatedFollowers })\r\n        .eq('id', organizationId);\r\n\r\n      if (error) throw error;\r\n\r\n      setOrganization((prevOrg) => ({\r\n        ...prevOrg,\r\n        followers: updatedFollowers,\r\n      }));\r\n\r\n      setIsSubscribed(!isSubscribed);\r\n    } catch (error) {\r\n      console.error('Ошибка при обновлении подписки:', error.message);\r\n    }\r\n  };\r\n\r\n  const toggleSearch = () => setSearchVisible(!searchVisible);\r\n\r\n  const formatDate = (date) => {\r\n    const userTimezone = moment.tz.guess();\r\n    return moment(date).tz(userTimezone).format('LLL');\r\n  };\r\n\r\n  const renderMedia = (media) => {\r\n    if (!media) return null;\r\n\r\n    const mediaObject = JSON.parse(media);\r\n    const mediaElements = Object.values(mediaObject.media).map((item, index) => {\r\n      if (item.type === 'video') {\r\n        return (\r\n          <video key={index} controls>\r\n            <source src={item.link} type=\"video/mp4\" />\r\n            Your browser does not support the video tag.\r\n          </video>\r\n        );\r\n      } else if (item.type === 'image') {\r\n        return <img key={index} src={item.link} alt=\"Post media\" />;\r\n      }\r\n      return null;\r\n    });\r\n\r\n    return (\r\n      <div className={`media-${mediaObject.type}`}>\r\n        {mediaElements}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      {loading ? (\r\n        <div className={load.spinner}>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n        </div>\r\n      ) : (\r\n        <div className={styles.content}>\r\n          <aside className={styles.sidebar}>\r\n            <div className={styles.subscriptionBlock}>\r\n              <button\r\n                className={isSubscribed ? styles.unsubscribeButton : styles.subscribeButton}\r\n                onClick={() => toggleSubscription(organization.id, isSubscribed)}\r\n              >\r\n                {isSubscribed ? 'Отписаться' : 'Подписаться'}\r\n              </button>\r\n            </div>\r\n            <div className={styles.avatarBlock}>\r\n              <img\r\n                src={organization.avatar_url}\r\n                alt=\"Organization Avatar\"\r\n                className={styles.avatar}\r\n              />\r\n            </div>\r\n            <div className={styles.details}>\r\n              <h3 className={styles.title}>{organization.name}</h3>\r\n              <p className={styles.subtitle}>Тематика</p>\r\n              <p>{organization.topic}</p>\r\n              <p className={styles.subtitle}>Описание</p>\r\n              <p className={styles.description}>\r\n                {organization.description.length > 150\r\n                  ? `${organization.description.substring(0, 150)}...`\r\n                  : organization.description}\r\n              </p>\r\n              <p className={styles.subtitle}>Персонал</p>\r\n              <div className={styles.staff}>\r\n                {staff.map((user) => (\r\n                  <div key={user.auth_id} className={styles.staffMember}>\r\n                    <img\r\n                      src={user.avatar_url}\r\n                      alt=\"Staff Avatar\"\r\n                      className={styles.staffAvatar}\r\n                    />\r\n                    <p>{user.first_name} {user.last_name}</p>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </aside>\r\n          <div className={styles.postsBlock}>\r\n            <div className={styles.header}>\r\n              {searchVisible ? (\r\n                <div className={styles.searchContainer}>\r\n                  <input type=\"text\" className={styles.searchInput} placeholder=\"Поиск...\" />\r\n                  <FontAwesomeIcon\r\n                    icon={faTimes}\r\n                    className={styles.searchIcon}\r\n                    onClick={toggleSearch}\r\n                  />\r\n                </div>\r\n              ) : (\r\n                <>\r\n                  <FontAwesomeIcon\r\n                    icon={faSearch}\r\n                    className={styles.icon}\r\n                    onClick={toggleSearch}\r\n                  />\r\n                  <FontAwesomeIcon icon={faEllipsisV} className={styles.icon} />\r\n                </>\r\n              )}\r\n            </div>\r\n            <div className={styles.posts}>\r\n              {posts.map((post) => (\r\n                <div key={post.id} className={styles.post}>\r\n                  <ProfileDescription description={post.content} />\r\n                  <div className={styles.postDate} title={moment(post.created_at).format('LLLL')}>\r\n                    {formatDate(post.created_at)}\r\n                  </div>\r\n                  {renderMedia(post.media)}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// Компонент для рендеринга описания с безопасным HTML\r\nconst ProfileDescription = ({ description }) => {\r\n  const sanitizedDescription = DOMPurify.sanitize(description);\r\n\r\n  return (\r\n    <div className=\"ql-editor\" data-gramm=\"false\" dangerouslySetInnerHTML={{ __html: sanitizedDescription }} />\r\n  );\r\n};\r\n\r\nexport default OrganizationView;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}