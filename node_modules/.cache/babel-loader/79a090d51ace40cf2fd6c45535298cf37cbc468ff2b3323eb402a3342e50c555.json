{"ast":null,"code":"import { nanoid } from './../lib/nanoid/non-secure/index.js';\nimport { COOKIE_EXPIRES_TIME_15_MIN } from '../constants.js';\nfunction getCookie(name) {\n  try {\n    let matches = document.cookie.match(new RegExp('(?:^|; )' + ('vkid_sdk:' + name).replace(/([.$?*|{}()\\[\\]\\\\\\/+^])/g, '\\\\$1') + '=([^;]*)'));\n    return matches ? decodeURIComponent(matches[1]) : undefined;\n  } catch (e) {\n    return undefined;\n  }\n}\nfunction setCookie(name, params) {\n  try {\n    const expireTime = new Date(new Date().getTime() + (params.expires || COOKIE_EXPIRES_TIME_15_MIN)).toUTCString();\n    const allowedDomain = location.host.split('.').slice(-2).join('.');\n    document.cookie = [`vkid_sdk:${name}=${encodeURIComponent(params.value || '')}`, `expires=${expireTime}`, 'path=/', `domain=.${allowedDomain}`, 'SameSite=Strict', 'Secure'].join('; ');\n  } catch (e) {}\n}\nfunction clearCookie(name) {\n  const allowedDomain = location.host.split('.').slice(-2).join('.');\n  try {\n    document.cookie = [`vkid_sdk:${name}=`, 'expires=Thu, 01 Jan 1970 00:00:00 UTC', 'path=/', 'SameSite=Strict', 'Secure', `domain=.${allowedDomain}`].join('; ');\n  } catch (e) {}\n}\nfunction cookie(name, params) {\n  if (params.value) {\n    setCookie(name, params);\n    return params.value;\n  }\n  let value;\n  value = getCookie(name);\n  if (!value) {\n    value = nanoid();\n    setCookie(name, {\n      ...params,\n      value\n    });\n  }\n  return value;\n}\nconst state = value => cookie('state', {\n  value\n});\nconst codeVerifier = value => cookie('codeVerifier', {\n  value\n});\nconst clearStateCookie = () => clearCookie('state');\nconst clearCodeVerifierCookie = () => clearCookie('codeVerifier');\nexport { clearCodeVerifierCookie, clearStateCookie, codeVerifier, cookie, state };","map":{"version":3,"names":["nanoid","COOKIE_EXPIRES_TIME_15_MIN","getCookie","name","matches","document","cookie","match","RegExp","replace","decodeURIComponent","undefined","e","setCookie","params","expireTime","Date","getTime","expires","toUTCString","allowedDomain","location","host","split","slice","join","encodeURIComponent","value","clearCookie","state","codeVerifier","clearStateCookie","clearCodeVerifierCookie"],"sources":["C:/Users/player/Documents/GitHub/synask-app/node_modules/@vkid/sdk/dist-sdk/esm/utils/cookie.js"],"sourcesContent":["import { nanoid } from './../lib/nanoid/non-secure/index.js';\nimport { COOKIE_EXPIRES_TIME_15_MIN } from '../constants.js';\n\nfunction getCookie(name) {\n    try {\n        let matches = document.cookie.match(new RegExp('(?:^|; )' + ('vkid_sdk:' + name).replace(/([.$?*|{}()\\[\\]\\\\\\/+^])/g, '\\\\$1') + '=([^;]*)'));\n        return matches ? decodeURIComponent(matches[1]) : undefined;\n    } catch (e) {\n        return undefined;\n    }\n}\nfunction setCookie(name, params) {\n    try {\n        const expireTime = new Date(new Date().getTime() + (params.expires || COOKIE_EXPIRES_TIME_15_MIN)).toUTCString();\n        const allowedDomain = location.host.split('.').slice(-2).join('.');\n        document.cookie = [\n            `vkid_sdk:${name}=${encodeURIComponent(params.value || '')}`,\n            `expires=${expireTime}`,\n            'path=/',\n            `domain=.${allowedDomain}`,\n            'SameSite=Strict',\n            'Secure'\n        ].join('; ');\n    } catch (e) {}\n}\nfunction clearCookie(name) {\n    const allowedDomain = location.host.split('.').slice(-2).join('.');\n    try {\n        document.cookie = [\n            `vkid_sdk:${name}=`,\n            'expires=Thu, 01 Jan 1970 00:00:00 UTC',\n            'path=/',\n            'SameSite=Strict',\n            'Secure',\n            `domain=.${allowedDomain}`\n        ].join('; ');\n    } catch (e) {}\n}\nfunction cookie(name, params) {\n    if (params.value) {\n        setCookie(name, params);\n        return params.value;\n    }\n    let value;\n    value = getCookie(name);\n    if (!value) {\n        value = nanoid();\n        setCookie(name, {\n            ...params,\n            value\n        });\n    }\n    return value;\n}\nconst state = (value)=>cookie('state', {\n        value\n    });\nconst codeVerifier = (value)=>cookie('codeVerifier', {\n        value\n    });\nconst clearStateCookie = ()=>clearCookie('state');\nconst clearCodeVerifierCookie = ()=>clearCookie('codeVerifier');\n\nexport { clearCodeVerifierCookie, clearStateCookie, codeVerifier, cookie, state };\n"],"mappings":"AAAA,SAASA,MAAM,QAAQ,qCAAqC;AAC5D,SAASC,0BAA0B,QAAQ,iBAAiB;AAE5D,SAASC,SAASA,CAACC,IAAI,EAAE;EACrB,IAAI;IACA,IAAIC,OAAO,GAAGC,QAAQ,CAACC,MAAM,CAACC,KAAK,CAAC,IAAIC,MAAM,CAAC,UAAU,GAAG,CAAC,WAAW,GAAGL,IAAI,EAAEM,OAAO,CAAC,0BAA0B,EAAE,MAAM,CAAC,GAAG,UAAU,CAAC,CAAC;IAC3I,OAAOL,OAAO,GAAGM,kBAAkB,CAACN,OAAO,CAAC,CAAC,CAAC,CAAC,GAAGO,SAAS;EAC/D,CAAC,CAAC,OAAOC,CAAC,EAAE;IACR,OAAOD,SAAS;EACpB;AACJ;AACA,SAASE,SAASA,CAACV,IAAI,EAAEW,MAAM,EAAE;EAC7B,IAAI;IACA,MAAMC,UAAU,GAAG,IAAIC,IAAI,CAAC,IAAIA,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,IAAIH,MAAM,CAACI,OAAO,IAAIjB,0BAA0B,CAAC,CAAC,CAACkB,WAAW,CAAC,CAAC;IAChH,MAAMC,aAAa,GAAGC,QAAQ,CAACC,IAAI,CAACC,KAAK,CAAC,GAAG,CAAC,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,GAAG,CAAC;IAClEpB,QAAQ,CAACC,MAAM,GAAG,CACd,YAAYH,IAAI,IAAIuB,kBAAkB,CAACZ,MAAM,CAACa,KAAK,IAAI,EAAE,CAAC,EAAE,EAC5D,WAAWZ,UAAU,EAAE,EACvB,QAAQ,EACR,WAAWK,aAAa,EAAE,EAC1B,iBAAiB,EACjB,QAAQ,CACX,CAACK,IAAI,CAAC,IAAI,CAAC;EAChB,CAAC,CAAC,OAAOb,CAAC,EAAE,CAAC;AACjB;AACA,SAASgB,WAAWA,CAACzB,IAAI,EAAE;EACvB,MAAMiB,aAAa,GAAGC,QAAQ,CAACC,IAAI,CAACC,KAAK,CAAC,GAAG,CAAC,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,GAAG,CAAC;EAClE,IAAI;IACApB,QAAQ,CAACC,MAAM,GAAG,CACd,YAAYH,IAAI,GAAG,EACnB,uCAAuC,EACvC,QAAQ,EACR,iBAAiB,EACjB,QAAQ,EACR,WAAWiB,aAAa,EAAE,CAC7B,CAACK,IAAI,CAAC,IAAI,CAAC;EAChB,CAAC,CAAC,OAAOb,CAAC,EAAE,CAAC;AACjB;AACA,SAASN,MAAMA,CAACH,IAAI,EAAEW,MAAM,EAAE;EAC1B,IAAIA,MAAM,CAACa,KAAK,EAAE;IACdd,SAAS,CAACV,IAAI,EAAEW,MAAM,CAAC;IACvB,OAAOA,MAAM,CAACa,KAAK;EACvB;EACA,IAAIA,KAAK;EACTA,KAAK,GAAGzB,SAAS,CAACC,IAAI,CAAC;EACvB,IAAI,CAACwB,KAAK,EAAE;IACRA,KAAK,GAAG3B,MAAM,CAAC,CAAC;IAChBa,SAAS,CAACV,IAAI,EAAE;MACZ,GAAGW,MAAM;MACTa;IACJ,CAAC,CAAC;EACN;EACA,OAAOA,KAAK;AAChB;AACA,MAAME,KAAK,GAAIF,KAAK,IAAGrB,MAAM,CAAC,OAAO,EAAE;EAC/BqB;AACJ,CAAC,CAAC;AACN,MAAMG,YAAY,GAAIH,KAAK,IAAGrB,MAAM,CAAC,cAAc,EAAE;EAC7CqB;AACJ,CAAC,CAAC;AACN,MAAMI,gBAAgB,GAAGA,CAAA,KAAIH,WAAW,CAAC,OAAO,CAAC;AACjD,MAAMI,uBAAuB,GAAGA,CAAA,KAAIJ,WAAW,CAAC,cAAc,CAAC;AAE/D,SAASI,uBAAuB,EAAED,gBAAgB,EAAED,YAAY,EAAExB,MAAM,EAAEuB,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}