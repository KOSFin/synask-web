{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{createClient}from'@supabase/supabase-js';import{jsx as _jsx}from\"react/jsx-runtime\";const supabase=createClient('https://cnicyffiqvdhgyzkogtl.supabase.co','eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNuaWN5ZmZpcXZkaGd5emtvZ3RsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MDc3NDM2NzcsImV4cCI6MjAyMzMxOTY3N30.bZoapdV-TJiq42uJaOPGBfPz91ULReQ1_ahXpUHNaJ8');const ProtectedRoute=_ref=>{let{children}=_ref;const[isAuthenticated,setIsAuthenticated]=useState(null);const[loading,setLoading]=useState(true);const redirectTo=url=>{window.location.href=url;return null;// Для React Router, чтобы не рендерить ничего\n};useEffect(()=>{const checkSession=async()=>{try{const{data,error}=await supabase.auth.getSession();if(error)throw error;setIsAuthenticated(data.session?true:false);}catch(error){setIsAuthenticated(false);}finally{setLoading(false);}};checkSession();},[]);if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});// Индикатор загрузки\n}return isAuthenticated?children:redirectTo(\"/login.html\");};export default ProtectedRoute;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","createClient","jsx","_jsx","supabase","ProtectedRoute","_ref","children","isAuthenticated","setIsAuthenticated","loading","setLoading","redirectTo","url","window","location","href","checkSession","data","error","auth","getSession","session"],"sources":["C:/Users/player/Documents/GitHub/synask-app/src/components/ProtectedRoute.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { createClient } from '@supabase/supabase-js';\r\n\r\nconst supabase = createClient('https://cnicyffiqvdhgyzkogtl.supabase.co', 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNuaWN5ZmZpcXZkaGd5emtvZ3RsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MDc3NDM2NzcsImV4cCI6MjAyMzMxOTY3N30.bZoapdV-TJiq42uJaOPGBfPz91ULReQ1_ahXpUHNaJ8');\r\n\r\nconst ProtectedRoute = ({ children }) => {\r\n    const [isAuthenticated, setIsAuthenticated] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    const redirectTo = (url) => {\r\n        window.location.href = url;\r\n        return null; // Для React Router, чтобы не рендерить ничего\r\n    };\r\n\r\n    useEffect(() => {\r\n        const checkSession = async () => {\r\n            try {\r\n                const { data, error } = await supabase.auth.getSession();\r\n                if (error) throw error;\r\n                setIsAuthenticated(data.session ? true : false);\r\n            } catch (error) {\r\n                setIsAuthenticated(false);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        checkSession();\r\n    }, []);\r\n\r\n    if (loading) {\r\n        return <div>Loading...</div>; // Индикатор загрузки\r\n    }\r\n\r\n    return isAuthenticated ? children : redirectTo(\"/login.html\");\r\n};\r\n\r\nexport default ProtectedRoute;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,YAAY,KAAQ,uBAAuB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAErD,KAAM,CAAAC,QAAQ,CAAGH,YAAY,CAAC,0CAA0C,CAAE,kNAAkN,CAAC,CAE7R,KAAM,CAAAI,cAAc,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CAChC,KAAM,CAACE,eAAe,CAAEC,kBAAkB,CAAC,CAAGX,QAAQ,CAAC,IAAI,CAAC,CAC5D,KAAM,CAACY,OAAO,CAAEC,UAAU,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CAE5C,KAAM,CAAAc,UAAU,CAAIC,GAAG,EAAK,CACxBC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAGH,GAAG,CAC1B,MAAO,KAAI,CAAE;AACjB,CAAC,CAEDd,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAkB,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC7B,GAAI,CACA,KAAM,CAAEC,IAAI,CAAEC,KAAM,CAAC,CAAG,KAAM,CAAAf,QAAQ,CAACgB,IAAI,CAACC,UAAU,CAAC,CAAC,CACxD,GAAIF,KAAK,CAAE,KAAM,CAAAA,KAAK,CACtBV,kBAAkB,CAACS,IAAI,CAACI,OAAO,CAAG,IAAI,CAAG,KAAK,CAAC,CACnD,CAAE,MAAOH,KAAK,CAAE,CACZV,kBAAkB,CAAC,KAAK,CAAC,CAC7B,CAAC,OAAS,CACNE,UAAU,CAAC,KAAK,CAAC,CACrB,CACJ,CAAC,CAEDM,YAAY,CAAC,CAAC,CAClB,CAAC,CAAE,EAAE,CAAC,CAEN,GAAIP,OAAO,CAAE,CACT,mBAAOP,IAAA,QAAAI,QAAA,CAAK,YAAU,CAAK,CAAC,CAAE;AAClC,CAEA,MAAO,CAAAC,eAAe,CAAGD,QAAQ,CAAGK,UAAU,CAAC,aAAa,CAAC,CACjE,CAAC,CAED,cAAe,CAAAP,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}